/*!
 * kh-demo-mobile
 *
 * @version: 1.4.0
 * @update: 2015-6-12
 * Copyright (c) 2015, wwj1983@gmail.com
 */
!function(){"use strict";window.Framework7=function(t){function n(e){var t=e.replace(/^./,function(e){return e.toUpperCase()});p["onPage"+t]=function(t,n){return p.onPage(e,t,n)}}function a(e,t,n){t=f(t);var a=t.find(e);return a.length>1&&("string"==typeof n.selector&&(a=t.find(n.selector+" "+e)),a.length>1&&(a=t.find("."+p.params.viewMainClass+" "+e))),1===a.length?a:void 0}function i(e,t,n){"to-left"===n&&(e.removeClass("page-on-center").addClass("page-from-center-to-left"),t.addClass("page-from-right-to-center")),"to-right"===n&&(e.removeClass("page-on-left").addClass("page-from-left-to-center"),t.removeClass("page-on-center").addClass("page-from-center-to-right"))}function o(e,t,n){"to-left"===n&&(t.removeClass("navbar-on-right").addClass("navbar-from-right-to-center"),t.find(".sliding").each(function(){var e=f(this);e.transform("translate3d(0px,0,0)"),p.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d(0px,0,0)")}),e.removeClass("navbar-on-center").addClass("navbar-from-center-to-left"),e.find(".sliding").each(function(){var e=f(this);p.params.animateNavBackIcon&&(e.hasClass("center")&&t.find(".sliding.left .back .icon").length>0&&(this.f7NavbarLeftOffset+=t.find(".sliding.left .back span")[0].offsetLeft),e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+-this.f7NavbarLeftOffset+"px,0,0)")),e.transform("translate3d("+this.f7NavbarLeftOffset+"px,0,0)")})),"to-right"===n&&(e.removeClass("navbar-on-left").addClass("navbar-from-left-to-center"),e.find(".sliding").each(function(){var e=f(this);e.transform("translate3d(0px,0,0)"),p.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d(0px,0,0)")}),t.removeClass("navbar-on-center").addClass("navbar-from-center-to-right"),t.find(".sliding").each(function(){var e=f(this);p.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+-this.f7NavbarRightOffset+"px,0,0)"),e.transform("translate3d("+this.f7NavbarRightOffset+"px,0,0)")}))}function r(e,t,n,i){var o,r,s,l,c,d,u,h,m=f(e.container),v=f(e.pagesContainer);if(p.pluginHook("loadPage",e,t,n),p._tempDomElement.innerHTML="",t||"string"==typeof n)p._tempDomElement.innerHTML=n;else if("length"in n&&n.length>1)for(var g=0;g<n.length;g++)f(p._tempDomElement).append(n[g]);else f(p._tempDomElement).append(n);if(h=i.reloadPrevious?"left":"center",o=a(".page",p._tempDomElement,e),!o)return void(e.allowPageChange=!0);if(o.addClass("page-on-"+h),s=v.children(".page:not(.cached)"),i.reloadPrevious&&1===s.length)return void(e.allowPageChange=!0);r=s.eq(s.length-1),e.params.dynamicNavbar&&(u=!0,c=a(".navbar-inner",p._tempDomElement,e),c||(u=!1),d=m.find(".navbar"),l=d.find(".navbar-inner:last-child")),u&&c.addClass("navbar-on-"+h),t||(t="#content-"+e.history.length,e.params.domCache||(e.contentCache[t]=n)),e.url=t;var b=e.history[e.history.length-(i.reloadPrevious?2:1)];0===b.indexOf("#content")&&b in e.contentCache&&(e.contentCache[b]=null,delete e.contentCache[b]),e.history[e.history.length-(i.reloadPrevious?2:1)]=t,i.reloadPrevious?(r=r.prev(".page"),o.insertBefore(r),u&&(l=l.prev(".navbar-inner"),c.insertAfter(l))):(v.append(o[0]),u&&d.append(c[0])),p.pageRemoveCallback(e,r[0],h),r.remove(),u&&l.remove(),p.pageInitCallback(e,o[0],t,h,u?c[0]:void 0),u&&p.navbarInitCallback(e,o[0],d[0],c[0],t,h),e.allowPageChange=!0}function s(e,t,n,r){function s(){e.allowPageChange=!0,l.removeClass("page-from-right-to-center page-on-right").addClass("page-on-center"),c.removeClass("page-from-center-to-left page-on-center").addClass("page-on-left"),g&&(m.removeClass("navbar-from-right-to-center navbar-on-right").addClass("navbar-on-center"),h.removeClass("navbar-from-center-to-left navbar-on-center").addClass("navbar-on-left")),p.pageAnimCallbacks("after",e,{pageContainer:l[0],url:t,position:"right",oldPage:c,newPage:l}),p.params.pushState&&p.pushStateClearQueue(),e.params.swipeBackPage||e.params.preloadPreviousPage||(e.params.domCache?(c.addClass("cached"),h.addClass("cached")):0===t.indexOf("#content")&&0===l.attr("data-page").indexOf("smart-select-")||l.attr("data-keep-pre")||(p.pageRemoveCallback(e,c[0],"left"),c.remove(),h.remove())),e.params.uniqueHistory&&y&&e.refreshPreviousPage()}var l,c,d,u,h,m,v,g,b=f(e.container),w=f(e.pagesContainer),C=r.animatePages;if("undefined"==typeof C&&(C=e.params.animatePages),p.pluginHook("loadPage",e,t,n),p._tempDomElement.innerHTML="",t||"string"==typeof n)p._tempDomElement.innerHTML=n;else if("length"in n&&n.length>1)for(var x=0;x<n.length;x++)f(p._tempDomElement).append(n[x]);else f(p._tempDomElement).append(n);if(l=a(".page",p._tempDomElement,e),!l)return void(e.allowPageChange=!0);if(l.addClass("page-on-right"),d=w.children(".page:not(.cached)"),d.length>1){for(u=0;u<d.length-2;u++)e.params.domCache?f(d[u]).addClass("cached"):(p.pageRemoveCallback(e,d[u],"left"),f(d[u]).remove());e.params.domCache?f(d[u]).addClass("cached"):(p.pageRemoveCallback(e,d[u],"left"),f(d[u]).remove())}if(c=w.children(".page:not(.cached)"),e.params.dynamicNavbar&&(g=!0,m=a(".navbar-inner",p._tempDomElement,e),m||(g=!1),v=b.find(".navbar"),h=v.find(".navbar-inner:not(.cached)"),h.length>0)){for(u=0;u<h.length-1;u++)e.params.domCache?f(h[u]).addClass("cached"):f(h[u]).remove();m||1!==h.length||(e.params.domCache?f(h[0]).addClass("cached"):f(h[0]).remove()),h=v.find(".navbar-inner:not(.cached)")}g&&(m.addClass("navbar-on-right"),v.append(m[0])),t||(t="#content-"+e.history.length,e.params.domCache||(e.contentCache[t]=n)),e.url=t,e.history.push(t);var y=!1;e.params.uniqueHistory&&e.history.indexOf(t)!==e.history.lastIndexOf(t)&&(e.history=e.history.slice(0,e.history.indexOf(t)),e.history.push(t),y=!0),w.append(l[0]),p.pageInitCallback(e,l[0],t,"right",g?m[0]:void 0),g&&p.navbarInitCallback(e,l[0],v[0],m[0],t,"right"),g&&C&&m.find(".sliding").each(function(){var e=f(this);e.transform("translate3d("+this.f7NavbarRightOffset+"px,0,0)"),p.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+-this.f7NavbarRightOffset+"px,0,0)")});l[0].clientLeft;p.pageAnimCallbacks("before",e,{pageContainer:l[0],url:t,position:"right",oldPage:c,newPage:l}),C?(i(c,l,"to-left",e),g&&setTimeout(function(){o(h,m,"to-left",e)},0),l.animationEnd(function(){s()})):s()}function l(e,t,n){p.pluginHook("preprocess",e,t,n),e=p.pluginProcess("preprocess",e),p.params.preprocess?(e=p.params.preprocess(e,t,n),"undefined"!=typeof e&&n(e)):n(e)}function c(){var e=this,t=e.scrollTop,n=e.scrollHeight,a=e.offsetHeight,i=e.getAttribute("data-distance");i||(i=50),"string"==typeof i&&i.indexOf("%")>=0&&(i=parseInt(i,10)/100*a),i>a&&(i=a),t+a>=n-i&&f(e).trigger("infinite")}function d(){p.device.ipad&&(document.body.scrollLeft=0,setTimeout(function(){document.body.scrollLeft=0},0))}var p=this;p.version="0.9.6",p.params={cache:!0,cacheIgnore:[],cacheIgnoreGetParameters:!1,cacheDuration:6e5,preloadPreviousPage:!0,uniqueHistory:!1,pushState:!1,pushStateRoot:void 0,pushStateNoAnimation:!1,pushStateSeparator:"#!/",fastClicks:!0,fastClicksDistanceThreshold:0,activeState:!0,activeStateElements:"a, button, label, span",animateNavBackIcon:!1,swipeBackPage:!0,swipeBackPageThreshold:0,swipeBackPageActiveArea:30,swipeBackPageBoxShadow:!0,ajaxLinks:void 0,externalLinks:["external"],sortable:!0,swipeout:!0,swipeoutNoFollow:!1,smartSelectBackTemplate:'<div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><span>{{backText}}</span></a></div>',smartSelectBackText:"Back",smartSelectSearchbar:!1,smartSelectBackOnSelect:!1,searchbarHideDividers:!0,searchbarHideGroups:!0,swipePanel:!1,swipePanelActiveArea:0,swipePanelCloseOpposite:!0,swipePanelNoFollow:!1,swipePanelThreshold:0,panelsCloseByOutside:!0,modalButtonOk:"OK",modalButtonCancel:"Cancel",modalUsernamePlaceholder:"Username",modalPasswordPlaceholder:"Password",modalTitle:"Framework7",modalCloseByOutside:!1,actionsCloseByOutside:!0,popupCloseByOutside:!0,modalPreloaderTitle:"Loading... ",init:!0,viewClass:"view",viewMainClass:"view-main",viewsClass:"views",notificationCloseOnClick:!1,notificationCloseIcon:!0,animatePages:!0};for(var u in t)p.params[u]=t[u];var f=e,h=Template7;p._compiledTemplates={},p.touchEvents={start:p.support.touch?"touchstart":"mousedown",move:p.support.touch?"touchmove":"mousemove",end:p.support.touch?"touchend":"mouseup"},p.ls=localStorage,p.rtl="rtl"===f("body").css("direction"),p.rtl&&f("html").attr("dir","rtl"),"undefined"!=typeof p.params.statusbarOverlay&&(p.params.statusbarOverlay?f("html").addClass("with-statusbar-overlay"):f("html").removeClass("with-statusbar-overlay")),p.globalEventListeners={},p.initGlobalEventListeners=function(){function e(e){var t;f(document).on(e,function(n){for(t=0;t<p.globalEventListeners[e].length;t++)p.globalEventListeners[e][t](n)}),p.globalEventListeners[e].initialized=!0}for(var t in p.globalEventListeners)p.globalEventListeners[t].initialized||e(t)},p.addGlobalEventListener=function(e,t){e in p.globalEventListeners||(p.globalEventListeners[e]=[]),p.globalEventListeners[e].push(t),p.initGlobalEventListeners()},p.removeGlobalEventListener=function(e,t){if(e in p.globalEventListeners)for(var n=p.globalEventListeners[e],a=0;a<n.length;a++)n[a]===t&&n.splice(a,1)},p.views=[];var m=function(e,t){function n(e){o[e]=function(t){t=t||{};var n=e.toLowerCase(),a=n.indexOf("content")>0;return("string"==typeof t||t.nodeType||"length"in t)&&(t=a?{content:t}:{url:t}),n.indexOf("reload")>=0&&(t.reload=!0,n.indexOf("previous")>=0&&(t.reloadPrevious=!0)),n.indexOf("refresh")>=0&&(t.url=n.indexOf("previous")>=0?o.history[o.history.length-2]:o.url,t.reload=!0,t.ignoreCache=!0,n.indexOf("previous")>=0&&(t.reloadPrevious=!0)),p.loadPage(o,t)}}var a={dynamicNavbar:!1,domCache:!1,linksView:void 0,uniqueHistory:p.params.uniqueHistory,swipeBackPage:p.params.swipeBackPage,swipeBackPageBoxShadow:p.params.swipeBackPageBoxShadow,swipeBackPageActiveArea:p.params.swipeBackPageActiveArea,swipeBackPageThreshold:p.params.swipeBackPageThreshold,animatePages:p.params.animatePages,preloadPreviousPage:p.params.preloadPreviousPage};t=t||{};for(var i in a)"undefined"==typeof t[i]&&(t[i]=a[i]);var o=this;o.params=t,o.selector=e;var r=f(e);o.container=r[0];var s=document.location.href;o.history=[];var l=s,c=p.params.pushStateSeparator,d=p.params.pushStateRoot;if(p.params.pushState&&(d?l=d:l.indexOf(c)>=0&&l.indexOf(c+"#")<0&&(l=l.split(c)[0])),o.url=r.attr("data-url")||o.params.url||l,o.url&&o.history.push(o.url),o.contentCache={},r[0].f7View=o,o.pagesContainer=r.find(".pages")[0],o.allowPageChange=!0,!o.activePage){var u,h=f(o.pagesContainer).find(".page-on-center");0===h.length&&(h=f(o.pagesContainer).find(".page"),h=h.eq(h.length-1)),h.length>0&&(u=h[0].f7PageData),u&&(u.view=o,o.url&&(u.url=o.url),o.activePage=u,h[0].f7PageData=u)}o.main=r.hasClass(p.params.viewMainClass);var m,v,g,b,w,C,x,y,k,T,S,P,$,E,O=!1,N=!1,B={},I=!0;o.handleTouchStart=function(e){I&&o.params.swipeBackPage&&!O&&!p.swipeoutOpenedEl&&(N=!1,O=!0,m=void 0,B.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,B.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,C=(new Date).getTime(),$=o.params.dynamicNavbar&&r.find(".navbar-inner").length>1)},o.handleTouchMove=function(e){if(O){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if("undefined"==typeof m&&(m=!!(m||Math.abs(n-B.y)>Math.abs(t-B.x))),m||e.f7PreventSwipeBack||p.preventSwipeBack)return void(O=!1);if(!N){var a=!1;b=r.width();var i=f(e.target),s=i.hasClass("swipeout")?i:i.parents(".swipeout");s.length>0&&(!p.rtl&&s.find(".swipeout-actions-left").length>0&&(a=!0),p.rtl&&s.find(".swipeout-actions-right").length>0&&(a=!0)),v=i.is(".page")?i:i.parents(".page"),v.hasClass("no-swipeback")&&(a=!0),g=r.find(".page-on-left:not(.cached)");var l=B.x-r.offset().left>o.params.swipeBackPageActiveArea;if(l=p.rtl?B.x<r.offset().left-r[0].scrollLeft+b-o.params.swipeBackPageActiveArea:B.x-r.offset().left>o.params.swipeBackPageActiveArea,l&&(a=!0),(0===g.length||0===v.length)&&(a=!0),a)return void(O=!1);$&&(x=r.find(".navbar-on-center:not(.cached)"),y=r.find(".navbar-on-left:not(.cached)"),k=x.find(".left, .center, .right"),T=y.find(".left, .center, .right"),p.params.animateNavBackIcon&&(S=x.find(".left.sliding .back .icon"),P=y.find(".left.sliding .back .icon")))}e.f7PreventPanelSwipe=!0,N=!0,e.preventDefault();var c=p.rtl?-1:1;w=(t-B.x-o.params.swipeBackPageThreshold)*c,0>w&&(w=0);var d=w/b,u={percentage:d,activePage:v[0],previousPage:g[0],activeNavbar:x[0],previousNavbar:y[0]};o.params.onSwipeBackMove&&o.params.onSwipeBackMove(u),r.trigger("swipebackmove",u);var h=w*c,C=(w/5-b/5)*c;if(1===p.device.pixelRatio&&(h=Math.round(h),C=Math.round(C)),v.transform("translate3d("+h+"px,0,0)"),o.params.swipeBackPageBoxShadow&&"android"!==p.device.os&&(v[0].style.boxShadow="0px 0px 12px rgba(0,0,0,"+(.5-.5*d)+")"),g.transform("translate3d("+C+"px,0,0)"),g[0].style.opacity=.9+.1*d,$){var I;for(I=0;I<k.length;I++)if(E=f(k[I]),E[0].style.opacity=1-1.3*d,E[0].className.indexOf("sliding")>=0){var A=d*E[0].f7NavbarRightOffset;1===p.device.pixelRatio&&(A=Math.round(A)),E.transform("translate3d("+A+"px,0,0)"),p.params.animateNavBackIcon&&E[0].className.indexOf("left")>=0&&S.length>0&&S.transform("translate3d("+-A+"px,0,0)")}for(I=0;I<T.length;I++)if(E=f(T[I]),E[0].style.opacity=1.3*d-.3,E[0].className.indexOf("sliding")>=0){var M=E[0].f7NavbarLeftOffset*(1-d);1===p.device.pixelRatio&&(M=Math.round(M)),E.transform("translate3d("+M+"px,0,0)"),p.params.animateNavBackIcon&&E[0].className.indexOf("left")>=0&&P.length>0&&P.transform("translate3d("+-M+"px,0,0)")}}}},o.handleTouchEnd=function(){if(!O||!N)return O=!1,void(N=!1);if(O=!1,N=!1,0===w)return f([v[0],g[0]]).transform("").css({opacity:"",boxShadow:""}),void($&&(k.transform("").css({opacity:""}),T.transform("").css({opacity:""}),S&&S.length>0&&S.transform(""),P&&S.length>0&&P.transform("")));var e=(new Date).getTime()-C,t=!1;if((300>e&&w>10||e>=300&&w>b/2)&&(v.removeClass("page-on-center").addClass("page-on-right"),g.removeClass("page-on-left").addClass("page-on-center"),$&&(x.removeClass("navbar-on-center").addClass("navbar-on-right"),y.removeClass("navbar-on-left").addClass("navbar-on-center")),t=!0),f([v[0],g[0]]).transform("").css({opacity:"",boxShadow:""}).addClass("page-transitioning"),$&&(k.css({opacity:""}).each(function(){var e=t?this.f7NavbarRightOffset:0,n=f(this);n.transform("translate3d("+e+"px,0,0)"),p.params.animateNavBackIcon&&n.hasClass("left")&&S.length>0&&S.addClass("page-transitioning").transform("translate3d("+-e+"px,0,0)")}).addClass("page-transitioning"),T.transform("").css({opacity:""}).each(function(){var e=t?0:this.f7NavbarLeftOffset,n=f(this);n.transform("translate3d("+e+"px,0,0)"),p.params.animateNavBackIcon&&n.hasClass("left")&&P.length>0&&P.addClass("page-transitioning").transform("translate3d("+-e+"px,0,0)")}).addClass("page-transitioning")),I=!1,o.allowPageChange=!1,t){var n=o.history[o.history.length-2];o.url=n,p.pageAnimCallbacks("before",o,{pageContainer:g[0],url:n,position:"left",newPage:g,oldPage:v,swipeBack:!0})}v.transitionEnd(function(){f([v[0],g[0]]).removeClass("page-transitioning"),$&&(k.removeClass("page-transitioning").css({opacity:""}),T.removeClass("page-transitioning").css({opacity:""}),S&&S.length>0&&S.removeClass("page-transitioning"),P&&P.length>0&&P.removeClass("page-transitioning")),I=!0,o.allowPageChange=!0,t&&(p.params.pushState&&history.back(),p.pageAnimCallbacks("after",o,{pageContainer:g[0],url:n,position:"left",newPage:g,oldPage:v,swipeBack:!0}),p.afterGoBack(o,v,g))})},o.attachEvents=function(e){var t=e?"off":"on";r[t](p.touchEvents.start,o.handleTouchStart),r[t](p.touchEvents.move,o.handleTouchMove),r[t](p.touchEvents.end,o.handleTouchEnd)},o.detachEvents=function(){o.attachEvents(!0)},o.params.swipeBackPage&&o.attachEvents(),p.views.push(o),o.main&&(p.mainView=o);for(var A="loadPage loadContent reloadPage reloadContent reloadPreviousPage reloadPreviousContent refreshPage refreshPreviousPage".split(" "),M=0;M<A.length;M++)n(A[M]);if(o.goBack=function(e){return e=e||{},("string"==typeof e||e.nodeType||"length"in e)&&(e={url:e}),p.goBack(o,e)},o.hideNavbar=function(){return p.hideNavbar(r)},o.showNavbar=function(){return p.showNavbar(r)},o.hideToolbar=function(){return p.hideToolbar(r)},o.showToolbar=function(){return p.showToolbar(r)},p.params.pushState&&o.main){var L;d?L=s.split(p.params.pushStateRoot+c)[1]:s.indexOf(c)>=0&&s.indexOf(c+"#")<0&&(L=s.split(c)[1]);var D=p.params.pushStateNoAnimation?!1:void 0;L&&p.loadPage(o,{url:L,animatePages:D,pushState:!1})}return o.destroy=function(){o.detachEvents(),o=void 0},p.pluginHook("addView",o),o};p.addView=function(e,t){return new m(e,t)},p.navbarInitCallback=function(e,t,n,a,i,o){var r={container:n,innerContainer:a},s={url:i,query:f.parseUrlQuery(i||""),container:t,name:f(t).attr("data-page"),view:e,from:o},l={navbar:r,page:s};p.pluginHook("navbarInit",r,s),f(a).trigger("navbarInit",l)},p.sizeNavbars=function(e){var t=e?f(e).find(".navbar .navbar-inner:not(.cached)"):f(".navbar .navbar-inner:not(.cached)");t.each(function(){var e,t,n=f(this),a=n.find(p.rtl?".right":".left"),i=n.find(p.rtl?".left":".right"),o=n.find(".center"),r=0===a.length,s=0===i.length,l=r?0:a.outerWidth(!0),c=s?0:i.outerWidth(!0),d=o.outerWidth(!0),u=n.width(),h=n.hasClass("navbar-on-left");s&&(e=u-d),r&&(e=0),r||s||(e=(u-c-d+l)/2);var m=(u-d)/2;u-l-c>d?(l>m&&(m=l),m+d>u-c&&(m=u-c-d),t=m-e):t=0;var v=p.rtl?-1:1,g=t;p.rtl&&r&&s&&o.length>0&&(g=-g),o.css({left:g+"px"}),o.hasClass("sliding")&&(o[0].f7NavbarLeftOffset=-(e+t)*v,o[0].f7NavbarRightOffset=(u-e-t-d)*v,h&&o.transform("translate3d("+o[0].f7NavbarLeftOffset+"px, 0, 0)")),!r&&a.hasClass("sliding")&&(p.rtl?(a[0].f7NavbarLeftOffset=-(u-a.outerWidth())/2*v,a[0].f7NavbarRightOffset=l*v):(a[0].f7NavbarLeftOffset=-l,a[0].f7NavbarRightOffset=(u-a.outerWidth())/2),h&&a.transform("translate3d("+a[0].f7NavbarLeftOffset+"px, 0, 0)")),!s&&i.hasClass("sliding")&&(p.rtl?(i[0].f7NavbarLeftOffset=-c*v,i[0].f7NavbarRightOffset=(u-i.outerWidth())/2*v):(i[0].f7NavbarLeftOffset=-(u-i.outerWidth())/2,i[0].f7NavbarRightOffset=c),h&&i.transform("translate3d("+i[0].f7NavbarLeftOffset+"px, 0, 0)"))})},p.hideNavbar=function(e){return f(e).addClass("hidden-navbar"),!0},p.showNavbar=function(e){var t=f(e);return t.addClass("hiding-navbar").removeClass("hidden-navbar").find(".navbar").transitionEnd(function(){t.removeClass("hiding-navbar")}),!0},p.hideToolbar=function(e){return f(e).addClass("hidden-toolbar"),!0},p.showToolbar=function(e){var t=f(e);t.addClass("hiding-toolbar").removeClass("hidden-toolbar").find(".toolbar").transitionEnd(function(){t.removeClass("hiding-toolbar")})},p.initSearchbar=function(e){function t(){h.val("").trigger("change"),d.removeClass("searchbar-active searchbar-not-empty"),v.length>0&&v.css(y,-x+"px"),g&&u.removeClass("searchbar-overlay-active"),p.device.ios?setTimeout(function(){h.blur()},400):h.blur()}function n(){p.device.ios?setTimeout(function(){g&&!d.hasClass("searchbar-active")&&u.addClass("searchbar-overlay-active"),d.addClass("searchbar-active"),v.length>0&&v.css(y,"0px"),g.trigger("enableSearch")},400):(g&&!d.hasClass("searchbar-active")&&u.addClass("searchbar-overlay-active"),d.addClass("searchbar-active"),v.length>0&&v.css(y,"0px"),g.trigger("disableSearch"))}function a(){h.val("").trigger("change"),g.trigger("clearSearch")}function i(){setTimeout(function(){var e=h.val().trim();0===e.length?(d.removeClass("searchbar-not-empty"),g&&d.hasClass("searchbar-active")&&u.addClass("searchbar-overlay-active")):(d.addClass("searchbar-not-empty"),g&&d.hasClass("searchbar-active")&&u.removeClass("searchbar-overlay-active")),g.length>0&&b&&l(e)},0)}function o(e){e.preventDefault()}function r(e){var r=e?"off":"on";d[r]("submit",o),v[r]("click",t),u[r]("click",t),h[r]("focus",n),h[r]("change keydown keypress keyup",i),m[r]("click",a)}function s(){r(!0)}function l(e){var t=e.trim().toLowerCase().split(" ");g.find("li").removeClass("hidden-by-searchbar");var n=[];g.find("li").each(function(e,a){a=f(a);var i=a.find(b);if(0!==i.length){var o;o=i.text().trim().toLowerCase();for(var r=0,s=0;s<t.length;s++)o.indexOf(t[s])>=0&&r++;r!==t.length?a.addClass("hidden-by-searchbar"):n.push(a[0])}}),p.params.searchbarHideDividers&&g.find(".item-divider, .list-group-title").each(function(){for(var e=f(this),t=e.nextAll("li"),n=!0,a=0;a<t.length;a++){var i=f(t[a]);if(i.hasClass("list-group-title")||i.hasClass("item-divider"))break;i.hasClass("hidden-by-searchbar")||(n=!1)}n?e.addClass("hidden-by-searchbar"):e.removeClass("hidden-by-searchbar")}),p.params.searchbarHideGroups&&g.find(".list-group").each(function(){var e=f(this),t=e.find("li:not(.hidden-by-searchbar)");0===t.length?e.addClass("hidden-by-searchbar"):e.removeClass("hidden-by-searchbar")}),g.trigger("search",{query:e,foundItems:n}),0===n.length?(C.show(),w.hide()):(C.hide(),w.show())}function c(){s(),e.off("pageBeforeRemove",c)}e=f(e);var d=e.hasClass("searchbar")?e:e.find(".searchbar");if(0!==d.length){e.hasClass("page")||(e=d.parents(".page").eq(0));var u=e.hasClass("page")?e.find(".searchbar-overlay"):f(".searchbar-overlay"),h=d.find('input[type="search"]'),m=d.find(".searchbar-clear"),v=d.find(".searchbar-cancel"),g=f(d.attr("data-search-list")),b=d.attr("data-search-in"),w=(d.attr("data-search-by"),d.attr("data-searchbar-found"));w?w=f(w):(w=e.find(".searchbar-found"),0===w.length&&(w=f(".searchbar-found")));var C=d.attr("data-searchbar-not-found");C?C=f(C):(C=e.find(".searchbar-not-found"),0===C.length&&(C=f(".searchbar-not-found")));var x,y=p.rtl?"margin-left":"margin-right";v.length>0&&(x=v.width(),v.css(y,-x+"px")),d[0].f7DestroySearchbar=s,r(),e.hasClass("page")&&e.on("pageBeforeRemove",c)}},p.destroySearchbar=function(e){e=f(e);var t=e.hasClass("searchbar")?e:e.find(".searchbar");0!==t.length&&t[0].f7DestroySearchbar&&t[0].f7DestroySearchbar()},p.initMessagebar=function(e){function t(e){e.preventDefault()}function n(){c.css({height:""});var e=c[0].offsetHeight,t=e-c[0].clientHeight,n=c[0].scrollHeight;if(n+t>e){var a=n+t,i=p+(a-u),o=s.attr("data-max-height")||s.parents(".view")[0].offsetHeight-88;i>o&&(i=o,a=i-p+u),c.css("height",a+"px"),s.css("height",i+"px"),d.length>0&&(d.css("padding-bottom",i+"px"),d.scrollTop(d[0].scrollHeight-d[0].offsetHeight))}else d.length>0&&(s.css({height:""}),d.css({"padding-bottom":""}))}function a(){clearTimeout(l),l=setTimeout(function(){n()},0)}function i(e){var n=e?"off":"on";s[n]("submit",t),c[n]("change keydown keypress keyup paste cut",a)}function o(){i(!0)}function r(){o(),e.off("pageBeforeRemove",r)}e=f(e);var s=e.hasClass("messagebar")?e:e.find(".messagebar");if(0!==s.length){var l,c=s.find("textarea"),d=s.parents(".page").find(".page-content"),p=s[0].offsetHeight,u=c[0].offsetHeight;s[0].f7DestroyMessagebar=o,i(),e.hasClass("page")&&e.on("pageBeforeRemove",r)}},p.destroyMessagebar=function(e){e=f(e);var t=e.hasClass("messagebar")?e:e.find(".messagebar");0!==t.length&&t[0].f7DestroyMessagebar&&t[0].f7DestroyMessagebar()},p.cache=[],p.removeFromCache=function(e){for(var t=!1,n=0;n<p.cache.length;n++)p.cache[n].url===e&&(t=n);t!==!1&&p.cache.splice(t,1)},p.xhr=!1,p.get=function(e,t,n,a){var i=e;if(p.params.cacheIgnoreGetParameters&&e.indexOf("?")>=0&&(i=e.split("?")[0]),p.params.cache&&!n&&e.indexOf("nocache")<0&&p.params.cacheIgnore.indexOf(i)<0)for(var o=0;o<p.cache.length;o++)if(p.cache[o].url===i&&(new Date).getTime()-p.cache[o].time<p.params.cacheDuration)return a(p.cache[o].content),!1;return p.xhr=f.ajax({url:e,method:"GET",start:p.params.onAjaxStart,complete:function(e){200===e.status||0===e.status?(a(e.responseText,!1),p.params.cache&&!n&&(p.removeFromCache(i),p.cache.push({url:i,time:(new Date).getTime(),content:e.responseText}))):a(e.responseText,!0),p.params.onAjaxComplete&&p.params.onAjaxComplete(e)},error:function(e){a(e.responseText,!0),p.params.onAjaxError&&p.params.onAjaxonAjaxError(e)}}),t&&(t.xhr=p.xhr),p.xhr},p.pageCallbacks={},p.onPage=function(e,t,n){if(t&&t.split(" ").length>1){for(var a=t.split(" "),i=[],o=0;o<a.length;o++)i.push(p.onPage(e,a[o],n));return i.remove=function(){for(var e=0;e<i.length;e++)i[e].remove()},i.trigger=function(){for(var e=0;e<i.length;e++)i[e].trigger()},i}var r=p.pageCallbacks[e][t];return r||(r=p.pageCallbacks[e][t]=[]),p.pageCallbacks[e][t].push(n),{remove:function(){for(var e,t=0;t<r.length;t++)r[t].toString()===n.toString()&&(e=t);"undefined"!=typeof e&&r.splice(e,1)},trigger:n}};for(var v="beforeInit init beforeAnimation afterAnimation beforeRemove".split(" "),g=0;g<v.length;g++)p.pageCallbacks[v[g]]={},n(v[g]);p.triggerPageCallbacks=function(e,t,n){var a=p.pageCallbacks[e]["*"];if(a)for(var i=0;i<a.length;i++)a[i](n);var o=p.pageCallbacks[e][t];if(o&&0!==o.length)for(var r=0;r<o.length;r++)o[r](n)},p.pageInitCallback=function(e,t,n,a,i){if(!t.f7PageInitialized){t.f7PageInitialized=!0;var o={container:t,url:n,query:f.parseUrlQuery(n||""),name:f(t).attr("data-page"),view:e,from:a,navbarInnerContainer:i};t.f7PageData=o,e&&(e.activePage=o),p.pluginHook("pageBeforeInit",o),p.params.onPageBeforeInit&&p.params.onPageBeforeInit(p,o),p.triggerPageCallbacks("beforeInit",o.name,o),f(o.container).trigger("pageBeforeInit",{page:o}),p.initPage(t),p.pluginHook("pageInit",o),p.params.onPageInit&&p.params.onPageInit(p,o),p.triggerPageCallbacks("init",o.name,o),f(o.container).trigger("pageInit",{page:o})}},p.pageRemoveCallback=function(e,t,n){var a={container:t,name:f(t).attr("data-page"),view:e,from:n};p.pluginHook("pageBeforeRemove",a),p.params.onPageBeforeRemove&&p.params.onPageBeforeRemove(p,a),p.triggerPageCallbacks("beforeRemove",a.name,a),f(a.container).trigger("pageBeforeRemove",{page:a})},p.pageAnimCallbacks=function(e,t,n){var a={container:n.pageContainer,url:n.url,query:f.parseUrlQuery(n.url||""),name:f(n.pageContainer).attr("data-page"),view:t,from:n.position,swipeBack:n.swipeBack},i=n.oldPage,o=n.newPage;n.pageContainer.f7PageData=a,"after"===e&&(p.pluginHook("pageAfterAnimation",a),p.params.onPageAfterAnimation&&p.params.onPageAfterAnimation(p,a),p.triggerPageCallbacks("afterAnimation",a.name,a),f(a.container).trigger("pageAfterAnimation",{page:a})),"before"===e&&(f(t.container).attr("data-page",a.name),t&&(t.activePage=a),o.hasClass("no-navbar")&&!i.hasClass("no-navbar")&&t.hideNavbar(),!o.hasClass("no-navbar")&&i.hasClass("no-navbar")&&t.showNavbar(),o.hasClass("no-toolbar")&&!i.hasClass("no-toolbar")&&t.hideToolbar(),!o.hasClass("no-toolbar")&&i.hasClass("no-toolbar")&&t.showToolbar(),p.pluginHook("pageBeforeAnimation",a),p.params.onPageBeforeAnimation&&p.params.onPageBeforeAnimation(p,a),p.triggerPageCallbacks("beforeAnimation",a.name,a),f(a.container).trigger("pageBeforeAnimation",{page:a}))},p.initPage=function(e){p.sizeNavbars&&p.sizeNavbars(f(e).parents("."+p.params.viewClass)[0]),p.initMessages&&p.initMessages(e),p.initFormsStorage&&p.initFormsStorage(e),p.initSmartSelects&&p.initSmartSelects(e),p.initSlider&&p.initSlider(e),p.initPullToRefresh&&p.initPullToRefresh(e),p.initInfiniteScroll&&p.initInfiniteScroll(e),p.initSearchbar&&p.initSearchbar(e),p.initMessagebar&&p.initMessagebar(e)},p.allowPageChange=!0,p._tempDomElement=document.createElement("div"),p.loadPage=function(e,t){function n(n){if(p.params.pushState&&!t.reloadPrevious){"undefined"==typeof o&&(o=!0);var i=p.params.pushStateRoot||"",c=t.reload?"replaceState":"pushState";o&&(a?history[c]({url:a},"",i+p.params.pushStateSeparator+a):n&&history[c]({content:n,url:"#content-"+e.history.length},"",i+p.params.pushStateSeparator+"#content-"+e.history.length))}l(n,a,function(n){t.reload?r(e,a,n,t):s(e,a,n,t)})}var a=t.url,i=t.content,o=t.pushState;return e.allowPageChange?a&&e.url===a&&!t.reload?!1:(e.allowPageChange=!1,p.xhr&&e.xhr&&e.xhr===p.xhr&&(p.xhr.abort(),p.xhr=!1),i?void n(i):void p.get(t.url,e,t.ignoreCache,function(t,a){return a?void(e.allowPageChange=!0):void n(t)})):!1},p.goBack=function(e,t){function n(){function t(){p.afterGoBack(e,v[0],g[0]),p.pageAnimCallbacks("after",e,{pageContainer:g[0],url:s,position:"left",oldPage:v,newPage:g})}p.pageAnimCallbacks("before",e,{pageContainer:g[0],url:s,position:"left",oldPage:v,newPage:g}),c?(i(g,v,"to-right",e),x&&setTimeout(function(){o(w,b,"to-right",e)},0),g.animationEnd(function(){t()})):(w.find(".sliding, .sliding .back .icon").transform(""),t())}function r(){if(g=a(".page",p._tempDomElement,e),!g)return void(e.allowPageChange=!0);if(g.addClass("page-on-left"),v=f(T[0]),e.params.dynamicNavbar&&(x=!0,w=a(".navbar-inner",p._tempDomElement,e),w||(x=!1)),x&&(C=y.find(".navbar"),b=C.find(".navbar-inner"),w.addClass(b.length>0?"navbar-on-left":"navbar-on-center"),b.length>1&&(f(b[0]).remove(),b=C.find(".navbar-inner")),C.prepend(w[0])),k.prepend(g[0]),p.pageInitCallback(e,g[0],s,"left",x?w[0]:void 0),x&&p.navbarInitCallback(e,g[0],C[0],w[0],s,"right"),x&&w.hasClass("navbar-on-left")&&c&&w.find(".sliding").each(function(){var e=f(this);p.params.animateNavBackIcon&&(e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+-this.f7NavbarLeftOffset+"px,0,0)"),e.hasClass("center")&&b.find(".left .back .icon ~ span").length>0&&(this.f7NavbarLeftOffset+=b.find(".left .back span")[0].offsetLeft)),e.transform("translate3d("+this.f7NavbarLeftOffset+"px,0,0)")}),d)return g.addClass("page-on-left"),void(e.allowPageChange=!0);e.url=s;g[0].clientLeft;n()}if(!e.allowPageChange)return!1;var s=t.url,c=t.animatePages,d=t.preloadOnly,u=t.pushState,h=t.ignoreCache,m=t.forceUrl;e.allowPageChange=!1,p.xhr&&e.xhr&&e.xhr===p.xhr&&(p.xhr.abort(),p.xhr=!1),p.pluginHook("goBack",e,s,d),p.params.pushState&&("undefined"==typeof u&&(u=!0),!d&&history.state&&u&&history.back());var v,g,b,w,C,x,y=f(e.container),k=f(e.pagesContainer),T=k.children(".page");if("undefined"==typeof c&&(c=e.params.animatePages),T.length>1&&!m){if(d)return void(e.allowPageChange=!0);if(e.url=e.history[e.history.length-2],g=f(T[T.length-2]),v=f(T[T.length-1]),e.params.dynamicNavbar){x=!0;var S=y.find(".navbar-inner:not(.cached)");w=f(S[0]),b=f(S[1])}n()}else{if(T.length>1&&m&&(p.pageRemoveCallback(e,T[T.length-2],"left"),f(T[T.length-2]).remove(),e.params.dynamicNavbar&&y.find(".navbar-inner:not(.cached)").eq(0).remove(),T=k.children(".page")),s&&0===s.indexOf("#")&&(s=void 0),(m&&!s||!m)&&(s=e.history[e.history.length-2]),!s)return void(e.allowPageChange=!0);if(m&&e.history.indexOf(s)&&(e.history=e.history.slice(0,e.history.indexOf(s)+2)),!e.params.domCache&&s in e.contentCache){var P=e.contentCache[s];return p._tempDomElement.innerHTML="",f(p._tempDomElement).append(P),void r()}p.get(s,e,h,function(t,n){return n?void(e.allowPageChange=!0):void l(t,s,function(e){p._tempDomElement.innerHTML=e,r()})})}},p.afterGoBack=function(e,t,n){if(t=f(t),n=f(n),p.pageRemoveCallback(e,t[0],"right"),t.remove(),n.removeClass("page-from-left-to-center page-on-left").addClass("page-on-center"),e.allowPageChange=!0,e.params.dynamicNavbar){{var a=f(e.container).find(".navbar-inner:not(.cached)");f(a[1]).remove(),f(a[0]).removeClass("navbar-on-left navbar-from-left-to-center").addClass("navbar-on-center")}if(e.params.preloadPreviousPage&&e.params.domCache){var i=f(e.container).find(".navbar-inner.cached");f(i[i.length-1]).removeClass("cached")}}var o=e.history.pop();if(!e.params.domCache&&o&&o.indexOf("#content-")>-1&&o in e.contentCache&&(e.contentCache[o]=null,delete e.contentCache[o]),p.params.pushState&&p.pushStateClearQueue(),e.params.preloadPreviousPage){if(e.params.domCache){var r=f(e.container).find(".page.cached");f(r[r.length-1]).removeClass("cached")}p.goBack(e,{preloadOnly:!0})}};var b=document.createElement("div");p.modal=function(e){e=e||{};var t="";if(p.params.modalTemplate)p._compiledTemplates.modal||(p._compiledTemplates.modal=h.compile(p.params.modalTemplate)),t=p._compiledTemplates.modal(e);
else{var n="";if(e.buttons&&e.buttons.length>0)for(var a=0;a<e.buttons.length;a++)n+='<span class="modal-button'+(e.buttons[a].bold?" modal-button-bold":"")+'">'+e.buttons[a].text+"</span>";var i=e.title?'<div class="modal-title">'+e.title+"</div>":"",o=e.title?'<div class="modal-text">'+e.text+"</div>":"",r=e.afterText?e.afterText:"",s=e.buttons&&0!==e.buttons.length?"":"modal-no-buttons";t='<div class="modal '+s+'"><div class="modal-inner">'+(i+o+r)+'</div><div class="modal-buttons">'+n+"</div></div>"}b.innerHTML=t;var l=f(b).children();return f("body").append(l[0]),l.find(".modal-button").each(function(t,n){f(n).on("click",function(n){e.buttons[t].close!==!1&&p.closeModal(l),e.buttons[t].onClick&&e.buttons[t].onClick(l,n),e.onClick&&e.onClick(l,t)})}),p.openModal(l),l[0]},p.alert=function(e,t,n){return"function"==typeof t&&(n=arguments[1],t=void 0),p.modal({text:e||"",title:"undefined"==typeof t?p.params.modalTitle:t,buttons:[{text:p.params.modalButtonOk,bold:!0,onClick:n}]})},p.confirm=function(e,t,n,a){return"function"==typeof t&&(a=arguments[2],n=arguments[1],t=void 0),p.modal({text:e||"",title:"undefined"==typeof t?p.params.modalTitle:t,buttons:[{text:p.params.modalButtonCancel,onClick:a},{text:p.params.modalButtonOk,bold:!0,onClick:n}]})},p.prompt=function(e,t,n,a){return"function"==typeof t&&(a=arguments[2],n=arguments[1],t=void 0),p.modal({text:e||"",title:"undefined"==typeof t?p.params.modalTitle:t,afterText:'<input type="text" class="modal-text-input">',buttons:[{text:p.params.modalButtonCancel},{text:p.params.modalButtonOk,bold:!0}],onClick:function(e,t){0===t&&a&&a(f(e).find(".modal-text-input").val()),1===t&&n&&n(f(e).find(".modal-text-input").val())}})},p.modalLogin=function(e,t,n,a){return"function"==typeof t&&(a=arguments[2],n=arguments[1],t=void 0),p.modal({text:e||"",title:"undefined"==typeof t?p.params.modalTitle:t,afterText:'<input type="text" name="modal-username" placeholder="'+p.params.modalUsernamePlaceholder+'" class="modal-text-input modal-text-input-double"><input type="password" name="modal-password" placeholder="'+p.params.modalPasswordPlaceholder+'" class="modal-text-input modal-text-input-double">',buttons:[{text:p.params.modalButtonCancel},{text:p.params.modalButtonOk,bold:!0}],onClick:function(e,t){var i=f(e).find('.modal-text-input[name="modal-username"]').val(),o=f(e).find('.modal-text-input[name="modal-password"]').val();0===t&&a&&a(i,o),1===t&&n&&n(i,o)}})},p.modalPassword=function(e,t,n,a){return"function"==typeof t&&(a=arguments[2],n=arguments[1],t=void 0),p.modal({text:e||"",title:"undefined"==typeof t?p.params.modalTitle:t,afterText:'<input type="password" name="modal-password" placeholder="'+p.params.modalPasswordPlaceholder+'" class="modal-text-input">',buttons:[{text:p.params.modalButtonCancel},{text:p.params.modalButtonOk,bold:!0}],onClick:function(e,t){var i=f(e).find('.modal-text-input[name="modal-password"]').val();0===t&&a&&a(i),1===t&&n&&n(i)}})},p.showPreloader=function(e){return p.modal({title:e||p.params.modalPreloaderTitle,text:'<div class="preloader"></div>'})},p.hidePreloader=function(){p.closeModal(".modal.modal-in")},p.showIndicator=function(){f("body").append('<div class="preloader-indicator-overlay"></div><div class="preloader-indicator-modal"><span class="preloader preloader-white"></span></div>')},p.hideIndicator=function(){f(".preloader-indicator-overlay, .preloader-indicator-modal").remove()},p.actions=function(e,t){var n,a,i,o=!1;1===arguments.length?t=e:p.device.ios?p.device.ipad&&(o=!0):f(window).width()>=768&&(o=!0),t=t||[],t.length>0&&!f.isArray(t[0])&&(t=[t]);var r;if(o){var s='<div class="popover actions-popover"><div class="popover-inner">{{#each this}}<div class="list-block"><ul>{{#each this}}{{#if label}}<li class="actions-popover-label {{#if color}}color-{{color}}{{/if}} {{#if bold}}actions-popover-bold{{/if}}">{{text}}</li>{{else}}<li><a href="#" class="item-link list-button {{#if color}}color-{{color}}{{/if}} {{#if bold}}actions-popover-bold{{/if}}">{{text}}</a></li>{{/if}}{{/each}}</ul></div>{{/each}}</div></div>';p._compiledTemplates.actionsPopover||(p._compiledTemplates.actionsPopover=h.compile(s));var l=p._compiledTemplates.actionsPopover(t);n=f(p.popover(l,e,!0)),a=".list-block ul",i=".list-button"}else{if(p.params.modalActionsTemplate)p._compiledTemplates.actions||(p._compiledTemplates.actions=h.compile(p.params.modalActionsTemplate)),r=p._compiledTemplates.actions(t);else{for(var c="",d=0;d<t.length;d++)for(var u=0;u<t[d].length;u++){0===u&&(c+='<div class="actions-modal-group">');var m=t[d][u],v=m.label?"actions-modal-label":"actions-modal-button";m.bold&&(v+=" actions-modal-button-bold"),m.color&&(v+=" color-"+m.color),c+='<span class="'+v+'">'+m.text+"</span>",u===t[d].length-1&&(c+="</div>")}r='<div class="actions-modal">'+c+"</div>"}b.innerHTML=r,n=f(b).children(),f("body").append(n[0]),a=".actions-modal-group",i=".actions-modal-button"}var g=n.find(a);return g.each(function(e,a){var r=e;f(a).children().each(function(e,a){var s,l=e,c=t[r][l];!o&&f(a).is(i)&&(s=f(a)),o&&f(a).find(i).length>0&&(s=f(a).find(i)),s&&s.on("click",function(e){c.close!==!1&&p.closeModal(n),c.onClick&&c.onClick(n,e)})})}),o||p.openModal(n),n[0]},p.popover=function(e,t,n){function a(){e.css({left:"",top:""});var n=e.width(),a=e.height(),i=e.find(".popover-angle"),o=i.width()/2;i.removeClass("on-left on-right on-top on-bottom").css({left:"",top:""});var r=t.outerWidth(),s=t.outerHeight(),l=t.offset(),c=t.parents(".page");c.length>0&&(l.top=l.top-c[0].scrollTop);var d=f(window).height(),p=f(window).width(),u=0,h=0,m=0,v="top";a+o<l.top?u=l.top-a-o:a+o<d-l.top-s?(v="bottom",u=l.top+s+o):(v="middle",u=s/2+l.top-a/2,m=u,0>u?u=5:u+a>d&&(u=d-a-5),m-=u),"top"===v||"bottom"===v?(h=r/2+l.left-n/2,m=h,5>h&&(h=5),h+n>p&&(h=p-n-5),"top"===v&&i.addClass("on-bottom"),"bottom"===v&&i.addClass("on-top"),m-=h,i.css({left:n/2-o+m+"px"})):"middle"===v&&(h=l.left-n-o,i.addClass("on-right"),5>h&&(h=l.left+r+o,i.removeClass("on-right").addClass("on-left")),h+n>p&&(h=p-n-5,i.removeClass("on-right").addClass("on-left")),i.css({top:a/2-o+m+"px"})),e.css({top:u+"px",left:h+"px"})}if("undefined"==typeof n&&(n=!0),"string"==typeof e&&e.indexOf("<")>=0){var i=document.createElement("div");if(i.innerHTML=f.trim(e),!(i.childNodes.length>0))return!1;e=i.childNodes[0],n&&e.classList.add("remove-on-close"),f("body").append(e)}return e=f(e),t=f(t),0===e.length||0===t.length?!1:(0===e.find(".popover-angle").length&&e.append('<div class="popover-angle"></div>'),e.show(),a(),f(window).on("resize",a),e.on("close",function(){f(window).off("resize",a)}),e.find("."+p.params.viewClass).length>0&&p.sizeNavbars(e.find("."+p.params.viewClass)[0]),p.openModal(e),e[0])},p.popup=function(e,t){if("undefined"==typeof t&&(t=!0),"string"==typeof e&&e.indexOf("<")>=0){var n=document.createElement("div");if(n.innerHTML=f.trim(e),!(n.childNodes.length>0))return!1;e=n.childNodes[0],t&&e.classList.add("remove-on-close"),f("body").append(e)}return e=f(e),0===e.length?!1:(e.show(),e.find("."+p.params.viewClass).length>0&&p.sizeNavbars(e.find("."+p.params.viewClass)[0]),p.openModal(e),e[0])},p.loginScreen=function(e){return e||(e=".login-screen"),e=f(e),0===e.length?!1:(e.show(),e.find("."+p.params.viewClass).length>0&&p.sizeNavbars(e.find("."+p.params.viewClass)[0]),p.openModal(e),e[0])},p.openModal=function(e){e=f(e);var t=e.hasClass("popover"),n=e.hasClass("popup"),a=e.hasClass("login-screen");t||n||a||e.css({marginTop:-Math.round(e.outerHeight()/2)+"px"});var i;a||(0!==f(".modal-overlay").length||n||f("body").append('<div class="modal-overlay"></div>'),0===f(".popup-overlay").length&&n&&f("body").append('<div class="popup-overlay"></div>'),i=f(n?".popup-overlay":".modal-overlay"));e[0].clientLeft;return e.trigger("open"),a||i.addClass("modal-overlay-visible"),e.removeClass("modal-out").addClass("modal-in").transitionEnd(function(){e.trigger(e.hasClass("modal-out")?"closed":"opened")}),!0},p.closeModal=function(e){if(e=f(e||".modal-in"),"undefined"==typeof e||0!==e.length){var t=e.hasClass("popover"),n=e.hasClass("popup"),a=e.hasClass("login-screen"),i=e.hasClass("remove-on-close"),o=f(n?".popup-overlay":".modal-overlay");return o.removeClass(n&&e.length===f(".popup.modal-in").length?"modal-overlay-visible":"modal-overlay-visible"),e.trigger("close"),t?(e.removeClass("modal-in modal-out").trigger("closed").hide(),i&&e.remove()):e.removeClass("modal-in").addClass("modal-out").transitionEnd(function(){e.trigger(e.hasClass("modal-out")?"closed":"opened"),n||a?(e.removeClass("modal-out").hide(),i&&e.length>0&&e.remove()):e.remove()}),!0}},p.allowPanelOpen=!0,p.openPanel=function(e){function t(){i.transitionEnd(function(e){f(e.target).is(i)?(n.trigger(n.hasClass("active")?"opened":"closed"),p.allowPanelOpen=!0):t()})}if(!p.allowPanelOpen)return!1;var n=f(".panel-"+e);if(0===n.length||n.hasClass("active"))return!1;p.closePanel(),p.allowPanelOpen=!1;var a=n.hasClass("panel-reveal")?"reveal":"cover";n.css({display:"block"}).addClass("active"),n.trigger("open"),n.find("."+p.params.viewClass).length>0&&p.sizeNavbars&&p.sizeNavbars(n.find("."+p.params.viewClass)[0]);var i=(n[0].clientLeft,"reveal"===a?f("."+p.params.viewsClass):n);return t(),f("body").addClass("with-panel-"+e+"-"+a),!0},p.closePanel=function(){var e=f(".panel.active");if(0===e.length)return!1;var t=e.hasClass("panel-reveal")?"reveal":"cover",n=e.hasClass("panel-left")?"left":"right";e.removeClass("active");var a="reveal"===t?f("."+p.params.viewsClass):e;e.trigger("close"),p.allowPanelOpen=!1,a.transitionEnd(function(){e.hasClass("active")||(e.css({display:""}),e.trigger("closed"),f("body").removeClass("panel-closing"),p.allowPanelOpen=!0)}),f("body").addClass("panel-closing").removeClass("with-panel-"+n+"-"+t)},p.initSwipePanels=function(){function e(e){if(p.allowPanelOpen&&p.params.swipePanel&&!i&&!(f(".modal-in, .photo-browser-in").length>0||!p.params.swipePanelCloseOpposite&&f(".panel.active").length>0&&!a.hasClass("active"))){if(b.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,b.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,p.params.swipePanelCloseOpposite&&(v=f(".panel.active").length>0?f(".panel.active").hasClass("panel-left")?"left":"right":p.params.swipePanel),a=f(".panel.panel-"+v),p.params.swipePanelActiveArea){if("left"===v&&b.x>p.params.swipePanelActiveArea)return;if("right"===v&&b.x<window.innerWidth-p.params.swipePanelActiveArea)return}o=!1,i=!0,r=void 0,s=(new Date).getTime(),m=void 0}}function t(e){if(i&&!e.f7PreventPanelSwipe){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if("undefined"==typeof r&&(r=!!(r||Math.abs(n-b.y)>Math.abs(t-b.x))),r)return void(i=!1);if(!m&&(m=t>b.x?"to-right":"to-left","left"===v&&"to-left"===m&&!a.hasClass("active")||"right"===v&&"to-right"===m&&!a.hasClass("active")))return void(i=!1);if(p.params.swipePanelNoFollow){var f=(new Date).getTime()-s;return 300>f&&("to-left"===m&&("right"===v&&p.openPanel(v),"left"===v&&a.hasClass("active")&&p.closePanel()),"to-right"===m&&("left"===v&&p.openPanel(v),"right"===v&&a.hasClass("active")&&p.closePanel())),i=!1,void(o=!1)}o||(h=a.hasClass("panel-cover")?"cover":"reveal",a.show(),g.show(),d=a.hasClass("active"),u=a.width(),a.transition(0),a.find("."+p.params.viewClass).length>0&&p.sizeNavbars&&p.sizeNavbars(a.find("."+p.params.viewClass)[0])),o=!0,e.preventDefault();var C=d?0:-p.params.swipePanelThreshold;"right"===v&&(C=-C),l=t-b.x+C,"right"===v?(c=l-(d?u:0),c>0&&(c=0),-u>c&&(c=-u)):(c=l+(d?u:0),0>c&&(c=0),c>u&&(c=u)),"reveal"===h?(w.transform("translate3d("+c+"px,0,0)").transition(0),g.transform("translate3d("+c+"px,0,0)"),p.pluginHook("swipePanelSetTransform",w[0],a[0],Math.abs(c/u))):(a.transform("translate3d("+c+"px,0,0)").transition(0),p.pluginHook("swipePanelSetTransform",w[0],a[0],Math.abs(c/u)))}}function n(){if(!i||!o)return i=!1,void(o=!1);i=!1,o=!1;var e,t=(new Date).getTime()-s,n=0===c||Math.abs(c)===u;if(e=d?c===-u?"reset":300>t&&Math.abs(c)>=0||t>=300&&Math.abs(c)<=u/2?"left"===v&&c===u?"reset":"swap":"reset":0===c?"reset":300>t&&Math.abs(c)>0||t>=300&&Math.abs(c)>=u/2?"swap":"reset","swap"===e&&(p.allowPanelOpen=!0,d?(p.closePanel(),n&&(a.css({display:""}),f("body").removeClass("panel-closing"))):p.openPanel(v),n&&(p.allowPanelOpen=!0)),"reset"===e)if(d)p.allowPanelOpen=!0,p.openPanel(v);else if(p.closePanel(),n)p.allowPanelOpen=!0,a.css({display:""});else{var r="reveal"===h?w:a;f("body").addClass("panel-closing"),r.transitionEnd(function(){p.allowPanelOpen=!0,a.css({display:""}),f("body").removeClass("panel-closing")})}"reveal"===h&&(w.transition(""),w.transform("")),a.transition("").transform(""),g.css({display:""}).transform("")}var a=f(".panel.panel-"+p.params.swipePanel);if(0!==a.length){var i,o,r,s,l,c,d,u,h,m,v,g=f(".panel-overlay"),b={},w=f("."+p.params.viewsClass);v=p.params.swipePanel,f(document).on(p.touchEvents.start,e),f(document).on(p.touchEvents.move,t),f(document).on(p.touchEvents.end,n)}},p.initMessages=function(e){var t=f(e),n=t.find(".messages");if(0!==n.length){var a=t.find(".page-content");n.hasClass("new-messages-first")||(a[0].scrollTop=n.height()-a.height()),p.updateMessagesAngles(n)}},p.addMessage=function(e){if(e=e||{},e.type=e.type||"sent",!e.text||0===e.length)return!1;var t=f(".messages-content");if(0===t.length)return!1;var n=t.find(".messages"),a=n.hasClass("new-messages-first"),i="";e.day&&(i+='<div class="messages-date">'+e.day+(e.time?",":"")+(e.time?" <span>"+e.time+"</span>":"")+"</div>");var o=e.text.indexOf("<img")>=0?"message-pic":"",r=e.avatar?"message-with-avatar":"",s="message message-"+e.type+" "+o+" "+r+" message-appear";i+='<div class="'+s+'">'+(e.name?'<div class="message-name">'+e.name+"</div>":"")+'<div class="message-text">'+e.text+"</div>"+(e.avatar?'<div class="message-avatar" style="background-image:url('+e.avatar+')"></div>':"")+"</div>",a?n.prepend(i):n.append(i),p.updateMessagesAngles(n),p.scrollMessagesContainer(t)},p.updateMessagesAngles=function(e){e.find(".message").each(function(){var e=f(this);e.find(".message-text img").length>0&&e.addClass("message-pic"),e.find(".message-avatar").length>0&&e.addClass("message-with-avatar")}),e.find(".message-sent").each(function(){var e=f(this),t=e.next(".message-sent"),n=e.prev(".message-sent");0===t.length?e.addClass("message-last"):e.removeClass("message-last"),0===n.length?e.addClass("message-first"):e.removeClass("message-first"),n.length>0&&n.find(".message-name").length>0&&e.find(".message-name").length>0&&n.find(".message-name").text()!==e.find(".message-name").text()&&(n.addClass("message-last"),e.addClass("message-first"))}),e.find(".message-received").each(function(){var e=f(this),t=e.next(".message-received"),n=e.prev(".message-received");0===t.length?e.addClass("message-last"):e.removeClass("message-last"),0===n.length?e.addClass("message-first"):e.removeClass("message-first"),n.length>0&&n.find(".message-name").length>0&&e.find(".message-name").length>0&&n.find(".message-name").text()!==e.find(".message-name").text()&&(n.addClass("message-last"),e.addClass("message-first"))})},p.scrollMessagesContainer=function(e){if(e=f(e||".messages-content"),0!==e.length){var t=e.find(".messages"),n=t.hasClass("new-messages-first"),a=e[0].scrollTop,i=n?0:t.height()-e.height();i!==a&&e.scrollTop(i,300)}},p.swipeoutOpenedEl=void 0,p.allowSwipeout=!0,p.initSwipeout=function(e){function t(e){p.allowSwipeout&&(o=!1,i=!0,r=void 0,$.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,$.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,s=(new Date).getTime())}function n(e){if(i){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if("undefined"==typeof r&&(r=!!(r||Math.abs(n-$.y)>Math.abs(t-$.x))),r)return void(i=!1);if(!o){if(f(".list-block.sortable-opened").length>0)return;c=f(this),d=c.find(".swipeout-content"),u=c.find(".swipeout-actions-right"),h=c.find(".swipeout-actions-left"),m=v=C=x=T=k=null,h.length>0&&(m=h.width(),C=h.children("a"),k=h.find(".swipeout-overswipe")),u.length>0&&(v=u.width(),x=u.children("a"),T=u.find(".swipeout-overswipe")),b=c.hasClass("swipeout-opened"),b&&(w=c.find(".swipeout-actions-left.swipeout-actions-opened").length>0?"left":"right"),c.removeClass("transitioning"),p.params.swipeoutNoFollow||(c.find(".swipeout-actions-opened").removeClass("swipeout-actions-opened"),c.removeClass("swipeout-opened"))}if(o=!0,e.preventDefault(),l=t-$.x,g=l,b&&("right"===w?g-=v:g+=m),g>0&&0===h.length||0>g&&0===u.length){if(!b)return void(i=o=!1);g=0}y=0>g?"to-left":g>0?"to-right":y?y:"to-left";var a,s,E;if(e.f7PreventPanelSwipe=!0,p.params.swipeoutNoFollow)return b?("right"===w&&l>0&&p.swipeoutClose(c),"left"===w&&0>l&&p.swipeoutClose(c)):(0>l&&u.length>0&&p.swipeoutOpen(c,"right"),l>0&&h.length>0&&p.swipeoutOpen(c,"left")),i=!1,void(o=!1);S=!1,P=!1;var O;if(u.length>0)for(E=g/v,-v>g&&(g=-v-Math.pow(-g-v,.8),T.length>0&&(P=!0)),a=0;a<x.length;a++)"undefined"==typeof x[a]._buttonOffset&&(x[a]._buttonOffset=x[a].offsetLeft),s=x[a]._buttonOffset,O=f(x[a]),T.length>0&&O.hasClass("swipeout-overswipe")&&O.css({left:(P?-s:0)+"px"}),O.transform("translate3d("+(g-s*(1+Math.max(E,-1)))+"px,0,0)");if(h.length>0)for(E=g/m,g>m&&(g=m+Math.pow(g-m,.8),k.length>0&&(S=!0)),a=0;a<C.length;a++)"undefined"==typeof C[a]._buttonOffset&&(C[a]._buttonOffset=m-C[a].offsetLeft-C[a].offsetWidth),s=C[a]._buttonOffset,O=f(C[a]),k.length>0&&O.hasClass("swipeout-overswipe")&&O.css({left:(S?s:0)+"px"}),O.css("z-index",C.length-a).transform("translate3d("+(g+s*(1-Math.min(E,1)))+"px,0,0)");d.transform("translate3d("+g+"px,0,0)")}}function a(){if(!i||!o)return i=!1,void(o=!1);i=!1,o=!1;var e,t,n,a,r,w=(new Date).getTime()-s;if(n="to-left"===y?u:h,t="to-left"===y?v:m,e=300>w&&(-10>l&&"to-left"===y||l>10&&"to-right"===y)||w>=300&&Math.abs(g)>t/2?"open":"close",300>w&&(0===Math.abs(g)&&(e="close"),Math.abs(g)===t&&(e="open")),"open"===e){p.swipeoutOpenedEl=c,c.trigger("open"),c.addClass("swipeout-opened transitioning");var k="to-left"===y?-t:t;if(d.transform("translate3d("+k+"px,0,0)"),n.addClass("swipeout-actions-opened"),a="to-left"===y?x:C)for(r=0;r<a.length;r++)f(a[r]).transform("translate3d("+k+"px,0,0)");P&&u.find(".swipeout-overswipe")[0].click(),S&&h.find(".swipeout-overswipe")[0].click()}else c.trigger("close"),p.swipeoutOpenedEl=void 0,c.addClass("transitioning").removeClass("swipeout-opened"),d.transform(""),n.removeClass("swipeout-actions-opened");var T;if(C&&C.length>0&&C!==a)for(r=0;r<C.length;r++)T=C[r]._buttonOffset,"undefined"==typeof T&&(C[r]._buttonOffset=m-C[r].offsetLeft-C[r].offsetWidth),f(C[r]).transform("translate3d("+T+"px,0,0)");if(x&&x.length>0&&x!==a)for(r=0;r<x.length;r++)T=x[r]._buttonOffset,"undefined"==typeof T&&(x[r]._buttonOffset=x[r].offsetLeft),f(x[r]).transform("translate3d("+-T+"px,0,0)");d.transitionEnd(function(){b&&"open"===e||closed&&"close"===e||(c.trigger("open"===e?"opened":"closed"),b&&"close"===e&&(u.length>0&&x.transform(""),h.length>0&&C.transform("")))})}var i,o,r,s,l,c,d,u,h,m,v,g,b,w,C,x,y,k,T,S,P,$={};f(document).on(p.touchEvents.start,function(e){if(p.swipeoutOpenedEl){var t=f(e.target);p.swipeoutOpenedEl.is(t[0])||t.parents(".swipeout").is(p.swipeoutOpenedEl)||t.hasClass("modal-in")||t.parents(".modal-in").length>0||t.hasClass("modal-overlay")||p.swipeoutClose(p.swipeoutOpenedEl)}}),e?(f(e).on(p.touchEvents.start,t),f(e).on(p.touchEvents.move,n),f(e).on(p.touchEvents.end,a)):(f(document).on(p.touchEvents.start,".list-block li.swipeout",t),f(document).on(p.touchEvents.move,".list-block li.swipeout",n),f(document).on(p.touchEvents.end,".list-block li.swipeout",a))},p.swipeoutOpen=function(e,t){if(e=f(e),0!==e.length&&(e.length>1&&(e=f(e[0])),e.hasClass("swipeout")&&!e.hasClass("swipeout-opened"))){t||(t=e.find(".swipeout-actions-right").length>0?"right":"left");var n=e.find(".swipeout-actions-"+t);if(0!==n.length){e.trigger("open").addClass("swipeout-opened").removeClass("transitioning"),n.addClass("swipeout-actions-opened");var a,i=n.children("a"),o=n.width(),r="right"===t?-o:o;if(i.length>1){for(a=0;a<i.length;a++)"right"===t?f(i[a]).transform("translate3d("+-i[a].offsetLeft+"px,0,0)"):f(i[a]).css("z-index",i.length-a).transform("translate3d("+(o-i[a].offsetWidth-i[a].offsetLeft)+"px,0,0)");{i[1].clientLeft}}for(e.addClass("transitioning"),a=0;a<i.length;a++)f(i[a]).transform("translate3d("+r+"px,0,0");e.find(".swipeout-content").transform("translate3d("+r+"px,0,0)").transitionEnd(function(){e.trigger("opened")}),p.swipeoutOpenedEl=e}}},p.swipeoutClose=function(e){if(e=f(e),0!==e.length&&e.hasClass("swipeout-opened")){var t=e.find(".swipeout-actions-opened").hasClass("swipeout-actions-right")?"right":"left",n=e.find(".swipeout-actions-opened").removeClass("swipeout-actions-opened"),a=n.children("a"),i=n.width();p.allowSwipeout=!1,e.trigger("close"),e.removeClass("swipeout-opened").addClass("transitioning"),e.find(".swipeout-content").transform("translate3d(0px,0,0)").transitionEnd(function(){e.trigger("closed"),a.transform(""),p.allowSwipeout=!0});for(var o=0;o<a.length;o++)f(a[o]).transform("right"===t?"translate3d("+-a[o].offsetLeft+"px,0,0)":"translate3d("+(i-a[o].offsetWidth-a[o].offsetLeft)+"px,0,0)"),f(a[o]).css({left:"0px"});p.swipeoutOpenedEl&&p.swipeoutOpenedEl[0]===e[0]&&(p.swipeoutOpenedEl=void 0)}},p.swipeoutDelete=function(e){if(e=f(e),0!==e.length){e.length>1&&(e=f(e[0])),p.swipeoutOpenedEl=void 0,e.trigger("delete"),e.css({height:e.outerHeight()+"px"});{e[0].clientLeft}e.css({height:"0px"}).addClass("deleting transitioning").transitionEnd(function(){e.trigger("deleted"),e.remove()});var t="-100%";e.find(".swipeout-content").transform("translate3d("+t+",0,0)")}},p.sortableToggle=function(e){return e=f(e),0===e.length&&(e=f(".list-block.sortable")),e.toggleClass("sortable-opened"),e.trigger(e.hasClass("sortable-opened")?"open":"close"),e},p.sortableOpen=function(e){return e=f(e),0===e.length&&(e=f(".list-block.sortable")),e.addClass("sortable-opened"),e.trigger("open"),e},p.sortableClose=function(e){return e=f(e),0===e.length&&(e=f(".list-block.sortable")),e.removeClass("sortable-opened"),e.trigger("close"),e},p.initSortable=function(){function e(e){i=!1,a=!0,o="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,s=f(this).parent(),l=s.parent().find("li"),m=s.parents(".sortable"),e.preventDefault(),p.allowsPanelOpen=p.allowSwipeout=!1}function t(e){if(a&&s){var t=("touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY);i||(s.addClass("sorting"),m.addClass("sortable-sorting"),c=s[0].offsetTop,d=s.parent().height()-s[0].offsetTop-s.height()),i=!0,e.preventDefault(),e.f7PreventPanelSwipe=!0,r=t-o;var n=r;-c>n&&(n=-c),n>d&&(n=d),s.transform("translate3d(0,"+n+"px,0)"),h=u=void 0,l.each(function(){var e=f(this);if(e[0]!==s[0]){var t=e[0].offsetTop,a=e.height(),i=s[0].offsetTop+n;i>=t-a/2&&s.index()<e.index()?(e.transform("translate3d(0,-100%,0)"),u=e,h=void 0):t+a/2>=i&&s.index()>e.index()?(f(this).transform("translate3d(0,100%,0)"),u=void 0,h||(h=e)):f(this).transform("translate3d(0, 0%,0)")}})}}function n(e){return p.allowsPanelOpen=p.allowSwipeout=!0,a&&i?(e.preventDefault(),l.transform(""),s.removeClass("sorting"),m.removeClass("sortable-sorting"),u&&(s.insertAfter(u),s.trigger("sort")),h&&(s.insertBefore(h),s.trigger("sort")),u=h=void 0,a=!1,void(i=!1)):(a=!1,void(i=!1))}var a,i,o,r,s,l,c,d,u,h,m;f(document).on(p.touchEvents.start,".list-block.sortable .sortable-handler",e),p.support.touch?(f(document).on(p.touchEvents.move,".list-block.sortable .sortable-handler",t),f(document).on(p.touchEvents.end,".list-block.sortable .sortable-handler",n)):(f(document).on(p.touchEvents.move,t),f(document).on(p.touchEvents.end,n))},p.initSmartSelects=function(e){var t=f(e);if(0!==t.length){var n=t.find(".smart-select");0!==n.length&&n.each(function(){var e=f(this),t=e.find("select");if(0!==t.length){var n=t[0];if(0!==n.length){for(var a=[],i=0;i<n.length;i++)n[i].selected&&a.push(n[i].textContent.trim());var o=e.find(".item-after");0===o.length?e.find(".item-inner").append('<div class="item-after">'+a.join(", ")+"</div>"):o.text(a)}}})}},p.smartSelectOpen=function(e){function t(o){var r=o.detail.page;r.name===S&&(f(document).off("pageInit",t),f(r.container).find('input[name="'+v+'"]').on("change",function(){var t=this,o=t.value,r=[];if("checkbox"===t.type)for(var s=0;s<a.options.length;s++){var l=a.options[s];l.value===o&&(l.selected=t.checked),l.selected&&r.push(l.textContent.trim())}else r=[e.find('option[value="'+o+'"]').text()],a.value=o;i.trigger("change"),e.find(".item-after").text(r.join(", ")),u&&"radio"===m&&n.goBack()}))}if(e=f(e),0!==e.length){var n=e.parents("."+p.params.viewClass);if(0!==n.length&&(n=n[0].f7View)){var a=e.find("select")[0],i=f(a);if(!(a.disabled||e.hasClass("disabled")||i.hasClass("disabled"))){var o={};o.length=a.length;for(var r,s=0;s<a.length;s++)r=f(a[s]),o[s]={value:a[s].value,text:a[s].textContent.trim(),selected:a[s].selected,group:r.parent("optgroup")[0],image:r.attr("data-option-image")||i.attr("data-option-image"),icon:r.attr("data-option-icon")||i.attr("data-option-icon"),disabled:a[s].disabled};for(var l,c=e.attr("data-page-title")||e.find(".item-title").text(),d=e.attr("data-back-text")||p.params.smartSelectBackText,u=e.attr("data-back-onselect")?"true"===e.attr("data-back-onselect")?!0:!1:p.params.smartSelectBackOnSelect,h=(new Date).getTime(),m=a.multiple?"checkbox":"radio",v=m+"-"+h,g="",b=0;b<o.length;b++)if(!o[b].disabled){var w=o[b].selected?"checked":"";o[b].group&&o[b].group!==l&&(g+='<li class="item-divider">'+o[b].group.label+"</li>",l=o[b].group);var C="";"checkbox"===m&&(C+='<i class="icon icon-form-checkbox"></i>'),o[b].icon&&(C+='<i class="icon '+o[b].icon+'"></i>'),o[b].image&&(C+='<img src="'+o[b].image+'">'),g+='<li><label class="label-'+m+' item-content"><input type="'+m+'" name="'+v+'" value="'+o[b].value+'" '+w+">"+(""!==C?'<div class="item-media">'+C+"</div>":"")+'<div class="item-inner"><div class="item-title">'+o[b].text+"</div></div></label></li>"}var x='<div class="navbar">  <div class="navbar-inner">'+p.params.smartSelectBackTemplate.replace(/{{backText}}/g,d)+'    <div class="center sliding">'+c+"</div>  </div></div>",y="static";e.parents(".navbar-through").length>0&&(y="through"),e.parents(".navbar-fixed").length>0&&(y="fixed");var k,T,S="smart-select-"+v,P=e.parents(".page").hasClass("no-toolbar")?"no-toolbar":"",$=e.parents(".page").hasClass("no-navbar")?"no-navbar":"navbar-"+y,E="undefined"==typeof e.data("searchbar")?p.params.smartSelectSearchbar:"true"===e.data("searchbar")?!0:!1;E&&(k=e.data("searchbar-placeholder")||"Search",T=e.data("searchbar-cancel")||"Cancel");var O='<form class="searchbar" data-search-list=".smart-select-list-'+h+'" data-search-in=".item-title"><div class="searchbar-input"><input type="search" placeholder="'+k+'"><a href="#" class="searchbar-clear"></a></div><a href="#" class="searchbar-cancel">'+T+'</a></form><div class="searchbar-overlay"></div>',N=("through"===y?x:"")+'<div class="pages">  <div data-page="'+S+'" class="page smart-select-page '+$+" "+P+'">'+("fixed"===y?x:"")+(E?O:"")+'    <div class="page-content">'+("static"===y?x:"")+'      <div class="list-block smart-select-list-'+h+'">        <ul>'+g+"        </ul>      </div>    </div>  </div></div>";f(document).on("pageInit",t),n.loadContent(N)}}}},p.initPullToRefresh=function(e){function t(e){if(r){if("android"!==p.device.os)return;if("targetTouches"in e&&e.targetTouches.length>1)return}s=!1,r=!0,l=void 0,v=void 0,g.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,g.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,d=(new Date).getTime(),u=f(this)}function n(e){if(r){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if("undefined"==typeof l&&(l=!!(l||Math.abs(n-g.y)>Math.abs(t-g.x))),!l)return void(r=!1);if(m=u[0].scrollTop,"undefined"==typeof v&&0!==m&&(v=!0),!s){if(u.removeClass("transitioning"),m>u[0].offsetHeight)return void(r=!1);C=u.hasClass("refreshing")?44:0,w=u[0].scrollHeight===u[0].offsetHeight||"ios"!==p.device.os?!0:!1}return s=!0,c=n-g.y,c>0&&0>=m||0>m?("ios"===p.device.os&&parseInt(p.device.osVersion.split(".")[0],10)>7&&0===m&&!v&&(w=!0),w&&(e.preventDefault(),h=Math.pow(c,.85)+C,u.transform("translate3d(0,"+h+"px,0)")),w&&Math.pow(c,.85)>44||!w&&c>=88?(b=!0,u.addClass("pull-up").removeClass("pull-down")):(b=!1,u.removeClass("pull-up").addClass("pull-down")),void 0):(u.removeClass("pull-up pull-down"),void(b=!1))}}function a(){return r&&s?(h&&(u.addClass("transitioning"),h=0),u.transform(""),b?(u.addClass("refreshing"),u.trigger("refresh",{done:function(){p.pullToRefreshDone(u)}})):u.removeClass("pull-down"),r=!1,void(s=!1)):(r=!1,void(s=!1))}function i(){o.off(p.touchEvents.start,t),o.off(p.touchEvents.move,n),o.off(p.touchEvents.end,a),x.off("pageBeforeRemove",i)}var o=f(e);if(o.hasClass("pull-to-refresh-content")||(o=o.find(".pull-to-refresh-content")),0!==o.length){var r,s,l,c,d,u,h,m,v,g={},b=!1,w=!1,C=0;u=o,o.on(p.touchEvents.start,t),o.on(p.touchEvents.move,n),o.on(p.touchEvents.end,a);var x=o.hasClass("page")?o:o.parents(".page");0!==x.length&&x.on("pageBeforeRemove",i)}},p.pullToRefreshDone=function(e){e=f(e),0===e.length&&(e=f(".pull-to-refresh-content.refreshing")),e.removeClass("refreshing").addClass("transitioning"),e.transitionEnd(function(){e.removeClass("transitioning pull-up pull-down")})},p.pullToRefreshTrigger=function(e){e=f(e),0===e.length&&(e=f(".pull-to-refresh-content")),e.hasClass("refreshing")||(e.addClass("transitioning refreshing"),e.trigger("refresh",{done:function(){p.pullToRefreshDone(e)}}))},p.attachInfiniteScroll=function(e){f(e).on("scroll",c)},p.detachInfiniteScroll=function(e){f(e).off("scroll",c)},p.initInfiniteScroll=function(e){function t(){p.detachInfiniteScroll(n),e.off("pageBeforeRemove",t)}e=f(e);var n=e.find(".infinite-scroll");p.attachInfiniteScroll(n),e.on("pageBeforeRemove",t)},p.showTab=function(e,t){var n=f(e);if(n.hasClass("active"))return!1;if(0===n.length)return!1;var a=n.parent(".tabs");if(0===a.length)return!1;p.allowSwipeout=!0;var i=a.parent().hasClass("tabs-animated-wrap");i&&a.transform("translate3d("+100*-n.index()+"%,0,0)");var o=a.children(".tab.active").removeClass("active");if(n.addClass("active"),n.trigger("show"),!i&&n.find(".navbar").length>0){var r;r=n.hasClass(p.params.viewClass)?n[0]:n.parents("."+p.params.viewClass)[0],p.sizeNavbars(r)}if(t?t=f(t):(t=f("string"==typeof e?'.tab-link[href="'+e+'"]':'.tab-link[href="#'+n.attr("id")+'"]'),0===t.length&&f("[data-tab]").each(function(){n.is(f(this).attr("data-tab"))&&(t=f(this))})),0!==t.length){var s;if(o&&o.length>0){var l=o.attr("id");l&&(s=f('.tab-link[href="#'+l+'"]')),0===s.length&&f("[data-tab]").each(function(){o.is(f(this).attr("data-tab"))&&(s=f(this))})}return t&&t.length>0&&t.addClass("active"),s&&s.length>0&&s.removeClass("active"),!0}},p.accordionToggle=function(e){e=f(e),0!==e.length&&(e.hasClass("accordion-item-expanded")?p.accordionClose(e):p.accordionOpen(e))},p.accordionOpen=function(e){e=f(e);var t=e.parents(".accordion-list"),n=e.find(".accordion-item-content"),a=t.find(".accordion-item-expanded");a.length>0&&p.accordionClose(a),n.css("height",n[0].scrollHeight+"px").transitionEnd(function(){if(e.hasClass("accordion-item-expanded")){n.transition(0),n.css("height","auto");{n[0].clientLeft}n.transition(""),e.trigger("opened")}else n.css("height",""),e.trigger("closed")}),e.trigger("open"),e.addClass("accordion-item-expanded")},p.accordionClose=function(e){e=f(e);var t=e.find(".accordion-item-content");e.removeClass("accordion-item-expanded"),t.transition(0),t.css("height",t[0].scrollHeight+"px");t[0].clientLeft;t.transition(""),t.css("height","").transitionEnd(function(){if(e.hasClass("accordion-item-expanded")){t.transition(0),t.css("height","auto");{t[0].clientLeft}t.transition(""),e.trigger("opened")
}else t.css("height",""),e.trigger("closed")}),e.trigger("close")},p.initFastClicks=function(){function e(e){var t=f(e.target),n=t.parents(p.params.activeStateElements);return n.length>0?n:t}function t(){var e=$.parents(".page-content, .panel");return 0===e.length?!1:("yes"!==e.prop("scrollHandlerSet")&&(e.on("scroll",function(){clearTimeout(E)}),e.prop("scrollHandlerSet","yes")),!0)}function n(){$.addClass("active-state")}function a(){$.removeClass("active-state")}function i(e){var t="button checkbox file image radio submit input textarea".split(" ");return document.activeElement&&e!==document.activeElement&&document.activeElement!==document.body?t.indexOf(e.nodeName.toLowerCase())>=0?!1:!0:!1}function o(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type?!1:e.className.indexOf("no-fastclick")>=0?!1:!0}function r(e){if(document.activeElement===e)return!1;var t=e.nodeName.toLowerCase(),n="button checkbox file image radio submit".split(" ");return e.disabled||e.readOnly?!1:"textarea"===t?!0:"select"===t?"android"===p.device.os?!1:!0:"input"===t&&n.indexOf(e.type)<0?!0:void 0}function s(e){if(e=f(e),e.is("label")||e.parents("label").length>0){if("android"===p.device.os){var t=p.device.osVersion.split(".");return 1*t[0]>4||1*t[0]===4&&1*t[1]>=4?!1:!0}return!1}return!0}function l(t){e(t).addClass("active-state"),"which"in t&&3===t.which&&setTimeout(function(){f(".active-state").removeClass("active-state")},0)}function c(){f(".active-state").removeClass("active-state")}function d(){f(".active-state").removeClass("active-state")}function u(a){if(P=!1,a.targetTouches.length>1)return!0;if(O=o(a.target),!O)return y=!1,!0;if("ios"===p.device.os){var r=window.getSelection();if(r.rangeCount&&(!r.isCollapsed||document.activeElement===r.focusNode))return k=!0,!0;k=!1}"android"===p.device.os&&i(a.target)&&document.activeElement.blur(),y=!0,x=a.target,C=(new Date).getTime(),b=a.targetTouches[0].pageX,w=a.targetTouches[0].pageY,"ios"===p.device.os&&(T=void 0,f(x).parents().each(function(){var e=this;e.scrollHeight>e.offsetHeight&&!T&&(T=e,T.f7ScrollTop=T.scrollTop)})),a.timeStamp-S<200&&a.preventDefault(),p.params.activeState&&($=e(a),t(a)?E=setTimeout(n,80):n())}function h(e){if(y){var t=!1,n=p.params.fastClicksDistanceThreshold;if(n){var i=e.targetTouches[0].pageX,o=e.targetTouches[0].pageY;(Math.abs(i-b)>n||Math.abs(o-w)>n)&&(t=!0)}else t=!0;t&&(y=!1,x=null,P=!0),p.params.activeState&&(clearTimeout(E),a())}}function m(e){if(clearTimeout(E),!y)return!k&&O&&e.preventDefault(),!0;if(document.activeElement===e.target)return!0;if(k||e.preventDefault(),e.timeStamp-S<200)return!0;if(S=e.timeStamp,C=0,y=!1,"ios"===p.device.os&&T&&T.scrollTop!==T.f7ScrollTop)return!1;p.params.activeState&&(n(),setTimeout(a,0)),r(x)&&x.focus(),e.preventDefault();var t=e.changedTouches[0],i=document.createEvent("MouseEvents"),o="click";return"android"===p.device.os&&"select"===x.nodeName.toLowerCase()&&(o="mousedown"),i.initMouseEvent(o,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,x.dispatchEvent(i),!1}function v(){y=!1,x=null}function g(e){var t=!1;return y?(x=null,y=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(x||(t=!0),document.activeElement===x&&(t=!0),e.forwardedTouchEvent&&(t=!0),e.cancelable||(t=!0),t||(e.stopImmediatePropagation(),e.stopPropagation(),x?(s(x)||P)&&e.preventDefault():e.preventDefault(),x=null),t)}p.params.activeState&&f("html").addClass("watch-active-state");var b,w,C,x,y,k,T,S,P,$,E,O;p.support.touch?(document.addEventListener("click",g,!0),p.addGlobalEventListener("touchstart",u),p.addGlobalEventListener("touchmove",h),p.addGlobalEventListener("touchend",m),p.addGlobalEventListener("touchcancel",v)):p.params.activeState&&(p.addGlobalEventListener("mousedown",l),p.addGlobalEventListener("mousemove",c),p.addGlobalEventListener("mouseup",d))},p.initClickEvents=function(){function e(e){function t(e){return"false"===e?!1:"true"===e?!0:void 0}var n=f(this),a=n.attr("href"),i="a"===n[0].nodeName.toLowerCase();if(i)for(var o=0;o<p.params.externalLinks.length;o++){if(n.hasClass(p.params.externalLinks[o]))return;if(n[0].rel===p.params.externalLinks[o])return}if(n.hasClass("smart-select")&&p.smartSelectOpen&&p.smartSelectOpen(n),n.hasClass("open-panel")&&p.openPanel(1===f(".panel").length?f(".panel").hasClass("panel-left")?"left":"right":"right"===n.attr("data-panel")?"right":"left"),n.hasClass("close-panel")&&p.closePanel(),n.hasClass("panel-overlay")&&p.params.panelsCloseByOutside&&p.closePanel(),n.hasClass("open-popover")){var r;r=n.attr("data-popover")?n.attr("data-popover"):".popover",p.popover(r,n)}n.hasClass("close-popover")&&p.closeModal(".popover.modal-in");var s;n.hasClass("open-popup")&&(s=n.attr("data-popup")?n.attr("data-popup"):".popup",p.popup(s)),n.hasClass("close-popup")&&(s=n.attr("data-popup")?n.attr("data-popup"):".popup.modal-in",p.closeModal(s));var l;if(n.hasClass("open-login-screen")&&(l=n.attr("data-login-screen")?n.attr("data-login-screen"):".login-screen",p.loginScreen(l)),n.hasClass("close-login-screen")&&p.closeModal(".login-screen.modal-in"),n.hasClass("modal-overlay")&&(f(".modal.modal-in").length>0&&p.params.modalCloseByOutside&&p.closeModal(".modal.modal-in"),f(".actions-modal.modal-in").length>0&&p.params.actionsCloseByOutside&&p.closeModal(".actions-modal.modal-in"),f(".popover.modal-in").length>0&&p.closeModal(".popover.modal-in")),n.hasClass("popup-overlay")&&f(".popup.modal-in").length>0&&p.params.popupCloseByOutside&&p.closeModal(".popup.modal-in"),n.hasClass("tab-link")&&p.showTab(n.attr("data-tab")||n.attr("href"),n),n.hasClass("swipeout-delete"))if(n.attr("data-confirm")){var c=n.attr("data-confirm"),d=n.attr("data-confirm-title");d?p.confirm(c,d,function(){p.swipeoutDelete(n.parents(".swipeout"))}):p.confirm(c,function(){p.swipeoutDelete(n.parents(".swipeout"))})}else p.swipeoutDelete(n.parents(".swipeout"));if(n.hasClass("toggle-sortable")&&p.sortableToggle(n.data("sortable")),n.hasClass("open-sortable")&&p.sortableOpen(n.data("sortable")),n.hasClass("close-sortable")&&p.sortableClose(n.data("sortable")),n.hasClass("accordion-item-toggle")||n.hasClass("item-link")&&n.parent().hasClass("accordion-item")){var u=n.parents(".accordion-item");0===u.length&&(u=n.parents("li")),p.accordionToggle(u)}if((!p.params.ajaxLinks||n.is(p.params.ajaxLinks))&&i){i&&e.preventDefault();var h=a&&a.length>0&&0!==a.indexOf("#");if(h||n.hasClass("back")){var m;if(n.attr("data-view")?m=f(n.attr("data-view"))[0].f7View:(m=n.parents("."+p.params.viewClass)[0]&&n.parents("."+p.params.viewClass)[0].f7View,m&&m.params.linksView&&(m=f(m.params.linksView)[0].f7View)),!m)for(var o=0;o<p.views.length;o++)p.views[o].main&&(m=p.views[o]);if(!m)return;var v;n.attr("data-animatePages")?v=t(n.attr("data-animatePages")):(n.hasClass("with-animation")&&(v=!0),n.hasClass("no-animation")&&(v=!1));var g={animatePages:v,ignoreCache:t(n.attr("data-ignoreCache")),forceUrl:t(n.attr("data-forceUrl")),reload:t(n.attr("data-reload")),reloadPrevious:t(n.attr("data-reloadPrevious")),url:n.attr("href")};n.hasClass("back")?m.goBack(g):m.loadPage(g)}}}f(document).on("click","a, .open-panel, .close-panel, .panel-overlay, .modal-overlay, .popup-overlay, .swipeout-delete, .close-popup, .open-popup, .open-popover, .open-login-screen, .close-login-screen .smart-select, .toggle-sortable, .open-sortable, .close-sortable, .accordion-item-toggle",e)},p.initResize=function(){f(window).on("resize",p.resize),f(window).on("orientationchange",p.orientationchange)},p.resize=function(){p.sizeNavbars&&p.sizeNavbars(),d()},p.orientationchange=function(){p.device&&p.device.minimalUi&&(90===window.orientation||-90===window.orientation)&&(document.body.scrollTop=0),d()},p.formsData={},p.formStoreData=function(e,t){p.formsData[e]=t,p.ls["f7form-"+e]=JSON.stringify(t)},p.formDeleteData=function(e){p.formsData[e]&&(p.formsData[e]="",delete p.formsData[e]),p.ls["f7form-"+e]&&(p.ls["f7form-"+e]="",p.ls.removeItem("f7form-"+e))},p.formGetData=function(e){return p.ls["f7form-"+e]?JSON.parse(p.ls["f7form-"+e]):p.formsData[e]?p.formsData[e]:void 0},p.formToJSON=function(e){if(e=f(e),1!==e.length)return!1;var t={},n=["submit","image","button","file"],a=[];return e.find("input, select, textarea").each(function(){var i=f(this),o=i.attr("name"),r=i.attr("type"),s=this.nodeName.toLowerCase();if(!(n.indexOf(r)>=0||a.indexOf(o)>=0||!o))if("select"===s&&i.attr("multiple"))a.push(o),t[o]=[],e.find('select[name="'+o+'"] option').each(function(){this.selected&&t[o].push(this.value)});else switch(r){case"checkbox":a.push(o),t[o]=[],e.find('input[name="'+o+'"]').each(function(){this.checked&&t[o].push(this.value)});break;case"radio":a.push(o),e.find('input[name="'+o+'"]').each(function(){this.checked&&(t[o]=this.value)});break;default:t[o]=i.val()}}),t},p.formFromJSON=function(e,t){if(e=f(e),1!==e.length)return!1;var n=["submit","image","button","file"],a=[];e.find("input, select, textarea").each(function(){var i=f(this),o=i.attr("name"),r=i.attr("type"),s=this.nodeName.toLowerCase();if(t[o]&&!(n.indexOf(r)>=0||a.indexOf(o)>=0||!o))if("select"===s&&i.attr("multiple"))a.push(o),e.find('select[name="'+o+'"] option').each(function(){this.selected=t[o].indexOf(this.value)>=0?!0:!1});else switch(r){case"checkbox":a.push(o),e.find('input[name="'+o+'"]').each(function(){this.checked=t[o].indexOf(this.value)>=0?!0:!1});break;case"radio":a.push(o),e.find('input[name="'+o+'"]').each(function(){this.checked=t[o]===this.value?!0:!1});break;default:i.val(t[o])}})},p.initFormsStorage=function(e){function t(){var e=f(this),t=e[0].id;if(t){var n=p.formToJSON(e);n&&(p.formStoreData(t,n),e.trigger("store",{data:n}))}}function n(){a.off("change submit",t),e.off("pageBeforeRemove",n)}if(e=f(e),0!==e.length){var a=e.find("form.store-data");0!==a.length&&(a.each(function(){var e=this.getAttribute("id");if(e){var t=p.formGetData(e);t&&p.formFromJSON(this,t)}}),a.on("change submit",t),e.on("pageBeforeRemove",n))}},f(document).on("submit change","form.ajax-submit, form.ajax-submit-onchange",function(e){var t=f(this);if("change"!==e.type||t.hasClass("ajax-submit-onchange")){"submit"===e.type&&e.preventDefault();var n=t.attr("method")||"GET",a=t.attr("enctype"),i=t.attr("action");if(i){var o;o="POST"===n?new FormData(t[0]):f.serializeObject(p.formToJSON(t[0]));var r=f.ajax({method:n,url:i,contentType:a,data:o,success:function(e){t.trigger("submitted",{data:e,xhr:r})}})}}}),p.pushStateQueue=[],p.pushStateClearQueue=function(){if(0!==p.pushStateQueue.length){var e,t=p.pushStateQueue.pop();p.params.pushStateNoAnimation===!0&&(e=!1),"goBack"===t.action&&p.goBack(t.view,{animatePages:e}),"loadPage"===t.action&&p.loadPage(t.view,{url:t.stateUrl,animatePages:e,pushState:!1}),"loadContent"===t.action&&p.loadPage(t.view,{content:t.stateContent,animatePages:e,pushState:!1})}},p.initPushState=function(){function e(e){if(!t){for(var n,a=0;a<p.views.length;a++)p.views[a].main&&(n=p.views[a]);if(n){var i=e.state;i||(i={url:n.history[0]});var o,r=i&&i.url||void 0,s=i&&i.content||void 0;p.params.pushStateNoAnimation===!0&&(o=!1),r!==n.url&&(n.history.indexOf(r)>=0?n.allowPageChange?p.goBack(n,{url:void 0,animatePages:o,pushState:!1,preloadOnly:!1}):p.pushStateQueue.push({action:"goBack",view:n}):r&&!s?n.allowPageChange?p.loadPage(n,{url:r,animatePages:o,pushState:!1}):p.pushStateQueue.unshift({action:"loadPage",stateUrl:r,view:n}):s&&(n.allowPageChange?p.loadPage(n,{content:s,animatePages:o,pushState:!1}):p.pushStateQueue.unshift({action:"loadContent",stateContent:s,view:n})))}}}var t=!0;f(window).on("load",function(){setTimeout(function(){t=!1},0)}),f(window).on("popstate",e)};var w=function(e,t){var n={initialSlide:0,spaceBetween:0,speed:300,slidesPerView:1,direction:"horizontal",paginationHide:!0,slideClass:"slider-slide",slideActiveClass:"slider-slide-active",slideNextClass:"slider-slide-next",slidePrevClass:"slider-slide-prev",wrapperClass:"slider-wrapper",bulletClass:"slider-pagination-bullet",bulletActiveClass:"slider-pagination-active",preventClicks:!0,preventClicksPropagation:!0,autoplay:!1,autoplayDisableOnInteraction:!0};t=t||{};for(var a in n)"undefined"==typeof t[a]&&(t[a]=n[a]);var i=this;if(i.params=t,i.container=f(e),0!==i.container.length){i.container[0].f7Slider=i,i.container.addClass("vertical"===i.params.direction?"slider-container-vertical":"slider-container-horizontal"),i.wrapper=i.container.children("."+i.params.wrapperClass),i.params.pagination&&(i.paginationContainer=f(i.params.pagination)),i.activeSlideIndex=i.previousSlideIndex=i.params.initialSlide||0;var o="horizontal"===i.params.direction,r=o&&p.rtl?-1:1;i.updateSlides=function(){if(i.slides=i.wrapper.children("."+i.params.slideClass),0!==i.params.spaceBetween){var e=p.rtl?"marginLeft":"marginRight";o?i.slides.css(e,i.params.spaceBetween+"px"):i.slides.css({marginBottom:i.params.spaceBetween+"px"})}if(i.params.slidesPerView>1){var n="(100% - "+(i.params.slidesPerView-1)*t.spaceBetween+"px)/"+i.params.slidesPerView;o?(i.slides.css("width","-webkit-calc("+n+")"),i.slides.css("width","-moz-calc("+n+")"),i.slides.css("width","calc("+n+")")):(i.slides.css("height","-webkit-calc("+n+")"),i.slides.css("height","-moz-calc("+n+")"),i.slides.css("height","calc("+n+")"))}},i.updatePagination=function(){if(i.paginationContainer&&i.paginationContainer.length>0){for(var e="",t=0;t<i.slides.length-i.params.slidesPerView+1;t++)e+='<span class="'+i.params.bulletClass+'"></span>';i.paginationContainer.html(e),i.bullets=i.paginationContainer.find("."+i.params.bulletClass)}},i.updateSize=function(){i.width=i.container[0].offsetWidth,i.height=i.container[0].offsetHeight,i.size=o?i.width:i.height},i.attachEvents=function(e){var t=e?"off":"on";i.container[t](p.touchEvents.start,i.onTouchStart),i.container[t](p.touchEvents.move,i.onTouchMove),i.container[t](p.touchEvents.end,i.onTouchEnd),f(window)[t]("resize",i.onResize),i.params.nextButton&&f(i.params.nextButton)[t]("click",i.onClickNext),i.params.prevButton&&f(i.params.prevButton)[t]("click",i.onClickPrev),i.params.indexButton&&f(i.params.indexButton)[t]("click",i.onClickIndex),(i.params.preventClicks||i.params.preventClicksPropagation)&&i.container[t]("click",i.onClick,!0)},i.detachEvents=function(){i.attachEvents(!0)},i.onResize=function(){i.updateSize(),i.slideTo(i.activeSlideIndex,0,!1)};var s,l,c,d,u,h,m={},v={},g=!1,b=Date.now();i.allowClick=!0,i.onClick=function(e){i.params.preventClicks&&!i.allowClick&&(e.preventDefault(),i.params.preventClicksPropagation&&(e.stopPropagation(),e.stopImmediatePropagation()))},i.onTouchStart=function(e){s=!0,l=!1,d=void 0,m.x=v.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,m.y=v.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,c=Date.now(),i.allowClick=!0,i.updateSize(),i.params.onTouchStart&&i.params.onTouchStart(i,e),"mousedown"===e.type&&e.preventDefault()},i.onTouchMove=function(e){if(i.params.onTouchMove&&i.params.onTouchMove(i,e),i.allowClick=!1,!(e.targetTouches&&e.targetTouches.length>1)&&(v.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,v.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,"undefined"==typeof d&&(d=!!(d||Math.abs(v.y-m.y)>Math.abs(v.x-m.x))),(o&&d||!o&&!d)&&i.params.onOppositeTouchMove&&i.params.onOppositeTouchMove(i,e),s)){if(o&&d||!o&&!d)return void(s=!1);i.params.onSliderMove&&i.params.onSliderMove(i,e),e.preventDefault(),e.stopPropagation(),l||(u=f.getTranslate(i.wrapper[0],o?"x":"y")*r,i.wrapper.transition(0),g&&i.onTransitionEnd(),t.autoplay&&C&&(i.params.autoplayDisableOnInteraction?i.stopAutoplay():w&&clearTimeout(w))),l=!0;var n=o?(v.x-m.x)*r:v.y-m.y;n>0&&0===i.activeSlideIndex?n=Math.pow(n,.85):0>n&&i.activeSlideIndex===i.slides.length-i.params.slidesPerView&&(n=-Math.pow(-n,.85));var a=o?(n+u)*r:0,c=o?0:n+u;i.wrapper.transform("translate3d("+a+"px, "+c+"px,0)")}},i.onTouchEnd=function(e){i.params.onTouchEnd&&i.params.onTouchEnd(i,e);var t=Date.now(),n=t-c;if(i.allowClick&&(300>n&&t-b>300&&(h&&clearTimeout(h),h=setTimeout(function(){i&&(i.params.paginationHide&&i.paginationContainer&&i.paginationContainer.toggleClass("slider-pagination-hidden"),i.params.onClick&&i.params.onClick(i,e))},300)),300>n&&300>t-b&&(h&&clearTimeout(h),i.params.onDoubleTap&&i.params.onDoubleTap(i,e)),i.params.onTap&&i.params.onTap(i,e)),b=Date.now(),!s||!l)return void(s=l=!1);s=l=!1;var a=o?(v.x-m.x)*r:v.y-m.y;Math.abs(a)<5&&300>n&&i.allowClick===!1&&(i.allowClick=!0),setTimeout(function(){i&&(i.allowClick=!0)},100);var d=i.params.autoplay&&C&&!i.params.autoplayDisableOnInteraction;if(0===a)return void(d&&i.startAutoplay());var p=1,u=i.size/i.params.slidesPerView;i.params.slidesPerView>1&&(p=Math.abs((Math.abs(a)+u/2)/u)),d&&i.wrapper.transitionEnd(function(){i.startAutoplay()}),n>300?-u/2>=a?i.slideTo(i.activeSlideIndex+Math.floor(p)):a>u/2?i.slideTo(i.activeSlideIndex-Math.floor(p)):i.slideReset():Math.abs(a)<10?i.slideReset():i.slideTo(0>a?i.activeSlideIndex+Math.round(p):i.activeSlideIndex-Math.round(p))},i.slideTo=function(e,t,n){"undefined"==typeof e&&(e=0),0>e&&(e=0),e>i.slides.length-i.params.slidesPerView&&(e=i.slides.length-i.params.slidesPerView);var a=-(i.size+i.params.spaceBetween)*e/i.params.slidesPerView;"undefined"==typeof t&&(t=i.params.speed),i.previousSlideIndex=i.activeSlideIndex,i.activeSlideIndex=Math.round(e),i.isFirst=0===i.activeSlideIndex,i.isLast=i.activeSlideIndex===i.slides.length-i.params.slidesPerView,i.onTransitionStart();var s=o?a*r:0,l=o?0:a;0===t?(i.wrapper.transition(0).transform("translate3d("+s+"px,"+l+"px,0)"),n!==!1&&i.onTransitionEnd()):(g=!0,i.wrapper.transition(t).transform("translate3d("+s+"px,"+l+"px,0)").transitionEnd(function(){n!==!1&&i.onTransitionEnd()}))},i.updateClasses=function(){i.slides.removeClass(i.params.slideActiveClass+" "+i.params.slideNextClass+" "+i.params.slidePrevClass);var e=i.slides.eq(i.activeSlideIndex);e.addClass(i.params.slideActiveClass),e.next().addClass(i.params.slideNextClass),e.prev().addClass(i.params.slidePrevClass),i.bullets&&i.bullets.length>0&&(i.bullets.removeClass(i.params.bulletActiveClass),i.bullets.eq(i.activeSlideIndex).addClass(i.params.bulletActiveClass))},i.onTransitionStart=function(){i.updateClasses(),i.activeSlideIndex!==i.previousSlideIndex&&i.params.onSlideChangeStart&&i.params.onSlideChangeStart(i),i.params.onTransitionStart&&i.params.onTransitionStart(i)},i.onTransitionEnd=function(){g=!1,i.wrapper.transition(0),i.activeSlideIndex!==i.previousSlideIndex&&i.params.onSlideChangeEnd&&i.params.onSlideChangeEnd(i),i.params.onTransitionEnd&&i.params.onTransitionEnd(i)},i.slideNext=function(){i.slideTo(i.activeSlideIndex+1)},i.slidePrev=function(){i.slideTo(i.activeSlideIndex-1)},i.slideReset=function(){i.slideTo(i.activeSlideIndex)},i.onClickNext=function(e){e.preventDefault(),i.slideNext()},i.onClickPrev=function(e){e.preventDefault(),i.slidePrev()},i.onClickIndex=function(e){e.preventDefault(),i.slideTo(f(this).index())};var w,C;return i.startAutoplay=function(){i.params.autoplay&&(C=!0,w&&clearTimeout(w),w=setTimeout(function(){i.wrapper.transitionEnd(function(){i.startAutoplay()});var e=i.activeSlideIndex+1;e>i.slides.length-i.params.slidesPerView&&(e=0),i.slideTo(e)},i.params.autoplay))},i.stopAutoplay=function(){C=!1,w&&clearTimeout(w)},i.resetAutoplay=function(){i.stopAutoplay(),i.startAutoplay()},i.init=function(){i.updateSlides(),i.updatePagination(),i.updateSize(),i.params.initialSlide>0?i.slideTo(i.params.initialSlide,0,!1):i.updateClasses(),i.attachEvents(),i.params.autoplay&&i.startAutoplay()},i.update=function(){i.updateSlides(),i.updatePagination(),i.updateSize(),i.updateClasses()},i.destroy=function(){i.detachEvents(),i.params.onDestroy&&i.params.onDestroy(),i=void 0},i.init(),i}};p.slider=function(e,t){return new w(e,t)},p.initSlider=function(e){function t(e){function t(){e.destroy(),n.off("pageBeforeRemove",t)}n.on("pageBeforeRemove",t)}var n=f(e),a=n.find(".slider-init");if(0!==a.length)for(var i=0;i<a.length;i++){var o,r=a.eq(i);o=r.data("slider")?JSON.parse(r.data("slider")):{initialSlide:parseInt(r.data("initialSlide"),10)||void 0,spaceBetween:parseInt(r.data("spaceBetween"),10)||void 0,speed:parseInt(r.data("speed"),10)||void 0,slidesPerView:r.data("slidesPerView"),direction:r.data("direction"),pagination:r.data("pagination"),paginationHide:r.data("paginationHide")&&("true"===r.data("paginationHide")?!0:!1),slideClass:r.data("slideClass"),slideActiveClass:r.data("slideActiveClass"),slideNextClass:r.data("slideNextClass"),slidePrevClass:r.data("slidePrevClass"),wrapperClass:r.data("wrapperClass"),bulletClass:r.data("bulletClass"),bulletActiveClass:r.data("bulletActiveClass"),nextButton:r.data("nextButton"),prevButton:r.data("prevButton"),indexButton:r.data("indexButton"),autoplay:r.data("autoplay")};var s=p.slider(r[0],o);t(s)}};var C=function(e){function t(){var e;for(n=0;n<p.views.length;n++)p.views[n].main&&(e=p.views[n]);return e}var n,a=this,i={photos:[],initialSlide:0,spaceBetween:20,speed:300,zoom:!0,maxZoom:3,minZoom:1,exposition:!0,expositionHideCaptions:!1,type:"standalone",navbar:!0,toolbar:!0,theme:"light",swipeToClose:!0,backLinkText:"Close",ofText:"of"};e=e||{};for(var o in i)"undefined"==typeof e[o]&&(e[o]=i[o]);a.params=e;var r="dark"===a.params.theme?"color-white":"",s=a.params.navbarTemplate||'<div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="link '+("page"===a.params.type&&"back")+' close-popup photo-browser-close-link" data-popup=".photo-browser-popup"><i class="icon icon-back '+r+'"></i><span>'+a.params.backLinkText+'</span></a></div><div class="center sliding"><span class="photo-browser-current"></span> <span class="photo-browser-of">'+a.params.ofText+'</span> <span class="photo-browser-total"></span></div><div class="right"></div></div></div>',l=p.rtl?"next":"prev",c=p.rtl?"prev":"next",d=a.params.toolbarTemplate||'<div class="toolbar tabbar"><div class="toolbar-inner"><a href="#" class="link photo-browser-prev"><i class="icon icon-'+l+" "+r+'"></i></a><a href="#" class="link photo-browser-next"><i class="icon icon-'+c+" "+r+'"></i></a></div></div>',u=a.params.template||'<div class="photo-browser photo-browser-'+a.params.theme+'"><div class="view navbar-fixed toolbar-fixed">{{navbar}}<div data-page="photo-browser-slides" class="page no-toolbar {{noNavbar}} toolbar-fixed navbar-fixed">{{toolbar}}{{captions}}<div class="photo-browser-slider-container slider-container"><div class="photo-browser-slider-wrapper slider-wrapper">{{photos}}</div></div></div></div></div>',h=a.params.photoTemplate||'<div class="photo-browser-slide slider-slide"><span class="photo-browser-zoom-container"><img src="{{url}}"></span></div>',m=a.params.captionsTheme||a.params.theme,v=a.params.captionsTemplate||'<div class="photo-browser-captions photo-browser-captions-'+m+'">{{captions}}</div>',g=a.params.captionTemplate||'<div class="photo-browser-caption" data-caption-index="{{captionIndex}}">{{caption}}</div>',b=a.params.objectTemplate||'<div class="photo-browser-slide photo-browser-object-slide slider-slide">{{html}}</div>',w="",C="";for(n=0;n<a.params.photos.length;n++){var x=a.params.photos[n],y="";"string"==typeof x||x instanceof String?y=x.indexOf("<")>=0||x.indexOf(">")>=0?b.replace(/{{html}}/g,x):h.replace(/{{url}}/g,x):"object"==typeof x&&(x.hasOwnProperty("html")&&x.html.length>0?y=b.replace(/{{html}}/g,x.html):x.hasOwnProperty("url")&&x.url.length>0&&(y=h.replace(/{{url}}/g,x.url)),x.hasOwnProperty("caption")&&x.caption.length>0?C+=g.replace(/{{caption}}/g,x.caption).replace(/{{captionIndex}}/g,n):y=y.replace(/{{caption}}/g,"")),w+=y}var k=u.replace("{{navbar}}",a.params.navbar?s:"").replace("{{noNavbar}}",a.params.navbar?"":"no-navbar").replace("{{photos}}",w).replace("{{captions}}",v.replace(/{{captions}}/g,C)).replace("{{toolbar}}",a.params.toolbar?d:"");a.activeSlideIndex=a.params.initialSlide,a.openIndex=a.activeSlideIndex,a.opened=!1,a.open=function(e){return"undefined"==typeof e&&(e=a.activeSlideIndex),e=parseInt(e,10),a.opened&&a.slider?void a.slider.slideTo(e):(a.opened=!0,a.openIndex=e,"standalone"===a.params.type&&f("body").append(k),"popup"===a.params.type&&(a.popup=p.popup('<div class="popup photo-browser-popup">'+k+"</div>"),f(a.popup).on("closed",a.onPopupClose)),"page"===a.params.type?(f(document).on("pageBeforeInit",a.onPageBeforeInit),f(document).on("pageBeforeRemove",a.onPageBeforeRemove),a.params.view||(a.params.view=t()),void a.params.view.loadContent(k)):(a.layout(a.openIndex),void(a.params.onOpen&&a.params.onOpen(a))))},a.close=function(){a.opened=!1,a.sliderContainer&&0!==a.sliderContainer.length&&(a.params.onClose&&a.params.onClose(a),a.attachEvents(!0),"standalone"===a.params.type&&a.container.removeClass("photo-browser-in").addClass("photo-browser-out").animationEnd(function(){a.container.remove()}),a.slider.destroy(),a.slider=a.sliderContainer=a.sliderWrapper=a.slides=T=S=P=void 0)},a.onPopupClose=function(){a.close(),f(a.popup).off("pageBeforeInit",a.onPopupClose)},a.onPageBeforeInit=function(e){"photo-browser-slides"===e.detail.page.name&&a.layout(a.openIndex),f(document).off("pageBeforeInit",a.onPageBeforeInit)},a.onPageBeforeRemove=function(e){"photo-browser-slides"===e.detail.page.name&&a.close(),f(document).off("pageBeforeRemove",a.onPageBeforeRemove)},a.layout=function(e){a.container="page"===a.params.type?f(".photo-browser-slider-container").parents(".view"):f(".photo-browser"),"standalone"===a.params.type&&(a.container.addClass("photo-browser-in"),p.sizeNavbars(a.container)),a.sliderContainer=a.container.find(".photo-browser-slider-container"),a.sliderWrapper=a.container.find(".photo-browser-slider-wrapper"),a.slides=a.container.find(".photo-browser-slide"),a.captionsContainer=a.container.find(".photo-browser-captions"),a.captions=a.container.find(".photo-browser-caption");var t={nextButton:a.params.nextButton||".photo-browser-next",prevButton:a.params.prevButton||".photo-browser-prev",indexButton:a.params.indexButton,initialSlide:e,spaceBetween:a.params.spaceBetween,speed:a.params.speed,onTap:function(e,t){a.params.onTap&&a.params.onTap(e,t)},onClick:function(e,t){a.params.exposition&&a.toggleExposition(),a.params.onClick&&a.params.onClick(e,t)},onDoubleTap:function(e,t){a.toggleZoom(f(t.target).parents(".photo-browser-slide")),a.params.onDoubleTap&&a.params.onDoubleTap(e,t)},onSlideChangeStart:function(e){a.activeSlideIndex=e.activeSlideIndex,a.container.find(".photo-browser-current").text(e.activeSlideIndex+1),a.container.find(".photo-browser-total").text(e.slides.length),f(".photo-browser-prev, .photo-browser-next").removeClass("photo-browser-link-inactive"),e.isFirst&&f(".photo-browser-prev").addClass("photo-browser-link-inactive"),e.isLast&&f(".photo-browser-next").addClass("photo-browser-link-inactive"),a.captions.length>0&&(a.captionsContainer.find(".photo-browser-caption-active").removeClass("photo-browser-caption-active"),a.captionsContainer.find('[data-caption-index="'+a.activeSlideIndex+'"]').addClass("photo-browser-caption-active"));var t=e.slides.eq(e.previousSlideIndex).find("video");t.length>0&&"pause"in t[0]&&t[0].pause(),a.params.onSlideChangeStart&&a.params.onSlideChangeStart(e)},onSlideChangeEnd:function(e){a.params.zoom&&T&&e.previousSlideIndex!==e.activeSlideIndex&&(S.transform("translate3d(0,0,0) scale(1)"),P.transform("translate3d(0,0,0)"),T=S=P=void 0,$=E=1),a.params.onSlideChangeEnd&&a.params.onSlideChangeEnd(e)}};a.params.swipeToClose&&"page"!==a.params.type&&(t.onTouchStart=a.swipeCloseTouchStart,t.onOppositeTouchMove=a.swipeCloseTouchMove,t.onTouchEnd=a.swipeCloseTouchEnd),a.slider=p.slider(a.sliderContainer,t),a.attachEvents()},a.attachEvents=function(e){var t=e?"off":"on";a.params.zoom&&(a.slides[t]("gesturestart",a.onSlideGestureStart),a.slides[t]("gesturechange",a.onSlideGestureChange),a.slides[t]("gestureend",a.onSlideGestureEnd),a.slides[t](p.touchEvents.start,a.onSlideTouchStart),a.slides[t](p.touchEvents.move,a.onSlideTouchMove),a.slides[t](p.touchEvents.end,a.onSlideTouchEnd)),a.container.find(".photo-browser-close-link")[t]("click",a.close)};a.exposed=!1,a.toggleExposition=function(){a.container&&a.container.toggleClass("photo-browser-exposed"),a.params.expositionHideCaptions&&a.captionsContainer.toggleClass("photo-browser-captions-exposed"),a.exposed=!a.exposed},a.expositionOn=function(){a.container&&a.container.addClass("photo-browser-exposed"),a.params.expositionHideCaptions&&a.captionsContainer.addClass("photo-browser-captions-exposed"),a.exposed=!0},a.expositionOff=function(){a.container&&a.container.removeClass("photo-browser-exposed"),a.params.expositionHideCaptions&&a.captionsContainer.removeClass("photo-browser-captions-exposed"),a.exposed=!1};var T,S,P,$=1,E=1,O=!1;a.onSlideGestureStart=function(){T||(T=f(this),S=T.find("img"),P=S.parent()),S.transition(0),O=!0},a.onSlideGestureChange=function(e){$=e.scale*E,$>a.params.maxZoom&&($=a.params.maxZoom-1+Math.pow($-a.params.maxZoom+1,.5)),$<a.params.minZoom&&($=a.params.minZoom+1-Math.pow(a.params.minZoom-$+1,.5)),S.transform("translate3d(0,0,0) scale("+$+")")},a.onSlideGestureEnd=function(){$=Math.max(Math.min($,a.params.maxZoom),a.params.minZoom),S.transition(a.params.speed).transform("translate3d(0,0,0) scale("+$+")"),E=$,O=!1,1===$&&(T=void 0)},a.toggleZoom=function(){T||(T=a.slides.eq(a.slider.activeSlideIndex),S=T.find("img"),P=S.parent()),P.transition(300).transform("translate3d(0,0,0)"),$&&1!==$?($=E=1,S.transition(300).transform("translate3d(0,0,0) scale(1)"),T=void 0):($=E=a.params.maxZoom,S.transition(300).transform("translate3d(0,0,0) scale("+$+")"))};var N,B,I,A,M,L,D,V,j,H,R,F,z,G,q,_,X,J={},U={};a.onSlideTouchStart=function(e){N||("android"===p.device.os&&e.preventDefault(),N=!0,J.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,J.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY)},a.onSlideTouchMove=function(e){if(a.slider.allowClick=!1,N&&T){B||(j=S[0].offsetWidth,H=S[0].offsetHeight,R=f.getTranslate(P[0],"x")||0,F=f.getTranslate(P[0],"y")||0,P.transition(0));var t=j*$,n=H*$;if(!(t<a.slider.width&&n<a.slider.height)){if(M=Math.min(a.slider.width/2-t/2,0),D=-M,L=Math.min(a.slider.height/2-n/2,0),V=-L,U.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,U.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!B&&!O&&(Math.floor(M)===Math.floor(R)&&U.x<J.x||Math.floor(D)===Math.floor(R)&&U.x>J.x))return void(N=!1);e.stopPropagation(),B=!0,I=U.x-J.x+R,A=U.y-J.y+F,M>I&&(I=M+1-Math.pow(M-I+1,.8)),I>D&&(I=D-1+Math.pow(I-D+1,.8)),L>A&&(A=L+1-Math.pow(L-A+1,.8)),A>V&&(A=V-1+Math.pow(A-V+1,.8)),z||(z=U.x),_||(_=U.y),G||(G=Date.now()),q=(U.x-z)/(Date.now()-G)/2,X=(U.y-_)/(Date.now()-G)/2,Math.abs(U.x-z)<2&&(q=0),Math.abs(U.y-_)<2&&(X=0),z=U.x,_=U.y,G=Date.now(),P.transform("translate3d("+I+"px, "+A+"px,0)")}}},a.onSlideTouchEnd=function(){if(!N||!B)return N=!1,void(B=!1);N=!1,B=!1;var e=300,t=300,n=q*e,i=I+n,o=X*t,r=A+o;0!==q&&(e=Math.abs((i-I)/q)),0!==X&&(t=Math.abs((r-A)/X));var s=Math.max(e,t);I=i,A=r;var l=j*$,c=H*$;M=Math.min(a.slider.width/2-l/2,0),D=-M,L=Math.min(a.slider.height/2-c/2,0),V=-L,I=Math.max(Math.min(I,D),M),A=Math.max(Math.min(A,V),L),P.transition(s).transform("translate3d("+I+"px, "+A+"px,0)")};var Y,W,Q,Z,K,et=!1,tt=!0,nt=!1;return a.swipeCloseTouchStart=function(){tt&&(et=!0)},a.swipeCloseTouchMove=function(e,t){if(et){nt||(nt=!0,W="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,Z=a.slider.slides.eq(a.slider.activeSlideIndex),K=(new Date).getTime()),t.preventDefault(),Q="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,Y=W-Q;var n=1-Math.abs(Y)/300;Z.transform("translate3d(0,"+-Y+"px,0)"),a.slider.container.css("opacity",n).transition(0)}},a.swipeCloseTouchEnd=function(){if(et=!1,!nt)return void(nt=!1);nt=!1,tt=!1;var e=Math.abs(Y),t=(new Date).getTime()-K;return 300>t&&e>20||t>=300&&e>100?void setTimeout(function(){"standalone"===a.params.type&&a.close(),"popup"===a.params.type&&p.closeModal(a.popup),a.params.onSwipeToClose&&a.params.onSwipeToClose(a),tt=!0},0):(0!==e?Z.addClass("transitioning").transitionEnd(function(){tt=!0,Z.removeClass("transitioning")
}):tt=!0,a.slider.container.css("opacity","").transition(""),void Z.transform(""))},a};p.photoBrowser=function(e){return new C(e)};var x;p.addNotification=function(e){if(e){"undefined"==typeof e.media&&(e.media=p.params.notificationMedia),"undefined"==typeof e.title&&(e.title=p.params.notificationTitle),"undefined"==typeof e.subtitle&&(e.subtitle=p.params.notificationSubtitle),"undefined"==typeof e.closeIcon&&(e.closeIcon=p.params.notificationCloseIcon),"undefined"==typeof e.hold&&(e.hold=p.params.notificationHold),"undefined"==typeof e.closeOnClick&&(e.closeOnClick=p.params.notificationCloseOnClick),x||(x=document.createElement("div"));var t=f(".notifications");0===t.length&&(f("body").append('<div class="notifications list-block media-list"><ul></ul></div>'),t=f(".notifications"));var n,a=t.children("ul");n=e.custom?"<li>"+e.custom+"</li>":'<li class="notification-item notification-hidden"><div class="item-content">'+(e.media?'<div class="item-media">'+e.media+"</div>":"")+'<div class="item-inner"><div class="item-title-row">'+(e.title?'<div class="item-title">'+e.title+"</div>":"")+(e.closeIcon?'<div class="item-after"><a href="#" class="close-notification"><span></span></a></div>':"")+"</div>"+(e.subtitle?'<div class="item-subtitle">'+e.subtitle+"</div>":"")+(e.message?'<div class="item-text">'+e.message+"</div>":"")+"</div></div></li>",x.innerHTML=n;var i=f(x).children();i.on("click",function(t){var n=!1;f(t.target).is(".close-notification")||f(t.target).parents(".close-notification").length>0?n=!0:(e.onClick&&e.onClick(t,i[0]),e.closeOnClick&&(n=!0)),n&&p.closeNotification(i[0])}),e.onClose&&i.data("f7NotificationOnClose",function(){e.onClose(i[0])}),e.additionalClass&&i.addClass(e.additionalClass),e.hold&&setTimeout(function(){i.length>0&&p.closeNotification(i[0])},e.hold),a.prepend(i[0]),t.show();var o=i.height();i.css("marginTop",-o+"px"),i.transition(0);{i[0].clientLeft}return i.transition(""),i.css("marginTop","0px"),t.transform("translate3d(0, 0,0)"),i.removeClass("notification-hidden"),i[0]}},p.closeNotification=function(e){if(e=f(e),0!==e.length&&!e.hasClass("notification-item-removing")){var t=f(".notifications"),n=e.height();e.css("height",n+"px").transition(0);{e[0].clientLeft}e.css("height","0px").transition("").addClass("notification-item-removing"),e.data("f7NotificationOnClose")&&e.data("f7NotificationOnClose")(),0===t.find(".notification-item:not(.notification-item-removing)").length&&t.transform(""),e.addClass("notification-hidden").transitionEnd(function(){e.remove(),0===t.find(".notification-item").length&&t.hide()})}};var y=[];return p.initPlugins=function(){for(var e in p.plugins){var t=p.plugins[e](p,p.params[e]);t&&y.push(t)}},p.pluginHook=function(e){for(var t=0;t<y.length;t++)y[t].hooks&&e in y[t].hooks&&y[t].hooks[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},p.pluginPrevent=function(e){for(var t=!1,n=0;n<y.length;n++)y[n].prevents&&e in y[n].prevents&&y[n].prevents[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])&&(t=!0);return t},p.pluginProcess=function(e,t){for(var n=t,a=0;a<y.length;a++)y[a].preprocess&&process in y[a].preprocess&&(n=y[a].preprocess[process](t,arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]));return n},p.init=function(){p.initPlugins&&p.initPlugins(),p.getDeviceInfo&&p.getDeviceInfo(),p.initFastClicks&&p.params.fastClicks&&p.initFastClicks(),p.initClickEvents&&p.initClickEvents(),f(".page").each(function(){var e=f(this),t=e.parents("."+p.params.viewClass);if(0!==t.length){var n=t[0].f7View||!1,a=n&&n.url?n.url:!1;t&&t.attr("data-page",e.attr("data-page")||void 0),p.pageInitCallback(n,this,a,"center")}}),p.initResize&&p.initResize(),p.initPushState&&p.params.pushState&&p.initPushState(),p.initSwipeout&&p.params.swipeout&&p.initSwipeout(),p.initSortable&&p.params.sortable&&p.initSortable(),p.initSwipePanels&&p.params.swipePanel&&p.initSwipePanels(),p.params.onAppInit&&p.params.onAppInit(),p.pluginHook("appInit")},p.params.init&&p.init(),p};var e=function(){var e=function(e){var t=this,n=0;for(n=0;n<e.length;n++)t[n]=e[n];return t.length=e.length,this},t=function(t,n){var a=[],i=0;if(t&&!n&&t instanceof e)return t;if(t)if("string"==typeof t){var o=(n||document).querySelectorAll(t);for(i=0;i<o.length;i++)a.push(o[i])}else if(t.nodeType||t===window||t===document)a.push(t);else if(t.length>0&&t[0].nodeType)for(i=0;i<t.length;i++)a.push(t[i]);return new e(a)};e.prototype={addClass:function(e){if("undefined"==typeof e)return this;for(var t=e.split(" "),n=0;n<t.length;n++)for(var a=0;a<this.length;a++)this[a].classList.add(t[n]);return this},removeClass:function(e){for(var t=e.split(" "),n=0;n<t.length;n++)for(var a=0;a<this.length;a++)this[a].classList.remove(t[n]);return this},hasClass:function(e){return this[0]?this[0].classList.contains(e):!1},toggleClass:function(e){for(var t=e.split(" "),n=0;n<t.length;n++)for(var a=0;a<this.length;a++)this[a].classList.toggle(t[n]);return this},attr:function(e,t){if("undefined"==typeof t)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n++)this[n].setAttribute(e,t);return this},removeAttr:function(e){for(var t=0;t<this.length;t++)this[t].removeAttribute(e)},prop:function(e,t){if("undefined"==typeof t)return this[0]?this[0][e]:void 0;for(var n=0;n<this.length;n++)this[n][e]=t;return this},data:function(e,t){if("undefined"==typeof t){if(this[0]){var n=this[0].getAttribute("data-"+e);return n?n:this[0].dom7ElementDataStorage&&e in this[0].dom7ElementDataStorage?this[0].dom7ElementDataStorage[e]:void 0}return void 0}for(var a=0;a<this.length;a++){var i=this[a];i.dom7ElementDataStorage||(i.dom7ElementDataStorage={}),i.dom7ElementDataStorage[e]=t}return this},val:function(e){if("undefined"==typeof e)return this[0]?this[0].value:null;for(var t=0;t<this.length;t++)this[t].value=e;return this},transform:function(e){for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransitionDuration=n.MsTransitionDuration=n.msTransitionDuration=n.MozTransitionDuration=n.OTransitionDuration=n.transitionDuration=e}return this},on:function(e,n,a,i){function o(e){var i=e.target;if(t(i).is(n))a.call(i,e);else for(var o=t(i).parents(),r=0;r<o.length;r++)t(o[r]).is(n)&&a.call(o[r],e)}var r,s,l=e.split(" ");for(r=0;r<this.length;r++)if("function"==typeof n||n===!1)for("function"==typeof n&&(a=arguments[1],i=arguments[2]||!1),s=0;s<l.length;s++)this[r].addEventListener(l[s],a,i);else for(s=0;s<l.length;s++)this[r].dom7LiveListeners||(this[r].dom7LiveListeners=[]),this[r].dom7LiveListeners.push({listener:a,liveListener:o}),this[r].addEventListener(l[s],o,i);return this},off:function(e,t,n,a){for(var i=e.split(" "),o=0;o<i.length;o++)for(var r=0;r<this.length;r++)if("function"==typeof t||t===!1)"function"==typeof t&&(n=arguments[1],a=arguments[2]||!1),this[r].removeEventListener(i[o],n,a);else if(this[r].dom7LiveListeners)for(var s=0;s<this[r].dom7LiveListeners.length;s++)this[r].dom7LiveListeners[s].listener===n&&this[r].removeEventListener(i[o],this[r].dom7LiveListeners[s].liveListener,a);return this},once:function(e,t,n,a){function i(r){n(r),o.off(e,t,i,a)}var o=this;"function"==typeof t&&(t=!1,n=arguments[1],a=arguments[2]),o.on(e,t,i,a)},trigger:function(e,t){for(var n=0;n<this.length;n++){var a;try{a=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0})}catch(i){a=document.createEvent("Event"),a.initEvent(e,!0,!0),a.detail=t}this[n].dispatchEvent(a)}return this},transitionEnd:function(e){function t(o){if(o.target===this)for(e.call(this,o),n=0;n<a.length;n++)i.off(a[n],t)}var n,a=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],i=this;if(e)for(n=0;n<a.length;n++)i.on(a[n],t);return this},animationEnd:function(e){function t(o){for(e(o),n=0;n<a.length;n++)i.off(a[n],t)}var n,a=["webkitAnimationEnd","OAnimationEnd","MSAnimationEnd","animationend"],i=this;if(e)for(n=0;n<a.length;n++)i.on(a[n],t);return this},width:function(){return this[0]===window?window.innerWidth:this.length>0?parseFloat(this.css("width"))-parseFloat(this.css("padding-left"))-parseFloat(this.css("padding-right")):null},outerWidth:function(e){return this.length>0?e?this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left")):this[0].offsetWidth:null},height:function(){return this[0]===window?window.innerHeight:this.length>0?this[0].offsetHeight-parseFloat(this.css("padding-top"))-parseFloat(this.css("padding-bottom")):null},outerHeight:function(e){return this.length>0?e?this[0].offsetHeight+parseFloat(this.css("margin-top"))+parseFloat(this.css("margin-bottom")):this[0].offsetHeight:null},offset:function(){if(this.length>0){var e=this[0],t=e.getBoundingClientRect(),n=document.body,a=e.clientTop||n.clientTop||0,i=e.clientLeft||n.clientLeft||0,o=window.pageYOffset||e.scrollTop,r=window.pageXOffset||e.scrollLeft;return{top:t.top+o-a,left:t.left+r-i}}return null},hide:function(){for(var e=0;e<this.length;e++)this[e].style.display="none";return this},show:function(){for(var e=0;e<this.length;e++)this[e].style.display="block";return this},css:function(e,t){var n;if(1===arguments.length){if("string"!=typeof e){for(n=0;n<this.length;n++)for(var a in e)this[n].style[a]=e[a];return this}if(this[0])return window.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(n=0;n<this.length;n++)this[n].style[e]=t;return this}return this},each:function(e){for(var t=0;t<this.length;t++)e.call(this[t],t,this[t]);return this},html:function(e){if("undefined"==typeof e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t++)this[t].innerHTML=e;return this},text:function(e){if("undefined"==typeof e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t++)this[0].textContent=e},is:function(n){if(!this[0])return!1;var a,i;if("string"==typeof n){var o=this[0];if(o===document)return n===document;if(o===window)return n===window;if(o.matches)return o.matches(n);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(n);if(o.mozMatchesSelector)return o.mozMatchesSelector(n);if(o.msMatchesSelector)return o.msMatchesSelector(n);for(a=t(n),i=0;i<a.length;i++)if(a[i]===this[0])return!0;return!1}if(n===document)return this[0]===document;if(n===window)return this[0]===window;if(n.nodeType||n instanceof e){for(a=n.nodeType?[n]:n,i=0;i<a.length;i++)if(a[i]===this[0])return!0;return!1}return!1},indexOf:function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t},index:function(){if(this[0]){for(var e=this[0],t=0;null!==(e=e.previousSibling);)1===e.nodeType&&t++;return t}return void 0},eq:function(t){if("undefined"==typeof t)return this;var n,a=this.length;return t>a-1?new e([]):0>t?(n=a+t,new e(0>n?[]:[this[n]])):new e([this[t]])},append:function(t){var n,a;for(n=0;n<this.length;n++)if("string"==typeof t){var i=document.createElement("div");for(i.innerHTML=t;i.firstChild;)this[n].appendChild(i.firstChild)}else if(t instanceof e)for(a=0;a<t.length;a++)this[n].appendChild(t[a]);else this[n].appendChild(t);return this},prepend:function(t){var n,a;for(n=0;n<this.length;n++)if("string"==typeof t){var i=document.createElement("div");for(i.innerHTML=t,a=i.childNodes.length-1;a>=0;a--)this[n].insertBefore(i.childNodes[a],this[n].childNodes[0])}else if(t instanceof e)for(a=0;a<t.length;a++)this[n].insertBefore(t[a],this[n].childNodes[0]);else this[n].insertBefore(t,this[n].childNodes[0]);return this},insertBefore:function(e){for(var n=t(e),a=0;a<this.length;a++)if(1===n.length)n[0].parentNode.insertBefore(this[a],n[0]);else if(n.length>1)for(var i=0;i<n.length;i++)n[i].parentNode.insertBefore(this[a].cloneNode(!0),n[i])},insertAfter:function(e){for(var n=t(e),a=0;a<this.length;a++)if(1===n.length)n[0].parentNode.insertBefore(this[a],n[0].nextSibling);else if(n.length>1)for(var i=0;i<n.length;i++)n[i].parentNode.insertBefore(this[a].cloneNode(!0),n[i].nextSibling)},next:function(n){return new e(this.length>0?n?this[0].nextElementSibling&&t(this[0].nextElementSibling).is(n)?[this[0].nextElementSibling]:[]:this[0].nextElementSibling?[this[0].nextElementSibling]:[]:[])},nextAll:function(n){var a=[],i=this[0];if(!i)return new e([]);for(;i.nextElementSibling;){var o=i.nextElementSibling;a.push(n&&t(o).is(n)?o:o),i=o}return new e(a)},prev:function(n){return new e(this.length>0?n?this[0].previousElementSibling&&t(this[0].previousElementSibling).is(n)?[this[0].previousElementSibling]:[]:this[0].previousElementSibling?[this[0].previousElementSibling]:[]:[])},prevAll:function(n){var a=[],i=this[0];if(!i)return new e([]);for(;i.previousElementSibling;){var o=i.previousElementSibling;a.push(n&&t(o).is(n)?o:o),i=o}return new e(a)},parent:function(e){for(var n=[],a=0;a<this.length;a++)e?t(this[a].parentNode).is(e)&&n.push(this[a].parentNode):n.push(this[a].parentNode);return t(t.unique(n))},parents:function(e){for(var n=[],a=0;a<this.length;a++)for(var i=this[a].parentNode;i;)e?t(i).is(e)&&n.push(i):n.push(i),i=i.parentNode;return t(t.unique(n))},find:function(t){for(var n=[],a=0;a<this.length;a++)for(var i=this[a].querySelectorAll(t),o=0;o<i.length;o++)n.push(i[o]);return new e(n)},children:function(n){for(var a=[],i=0;i<this.length;i++)for(var o=this[i].childNodes,r=0;r<o.length;r++)n?1===o[r].nodeType&&t(o[r]).is(n)&&a.push(o[r]):1===o[r].nodeType&&a.push(o[r]);return new e(t.unique(a))},remove:function(){for(var e=0;e<this.length;e++)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},detach:function(){return this.remove()}},function(){function t(t){e.prototype[t]=function(e){var n;if("undefined"==typeof e){for(n=0;n<this.length;n++)a.indexOf(t)<0&&this[n][t]();return this}return this.on(t,e)}}for(var n="click blur focus focusin focusout keyup keydown keypress submit change mousedown mousemove mouseup mouseenter mouseleave mouseout mouseover touchstart touchend touchmove resize scroll".split(" "),a="resize scroll".split(" "),i=0;i<n.length;i++)t(n[i])}();var n=0;return t.ajax=function(e){var a={method:"GET",data:!1,async:!0,cache:!0,user:"",password:"",headers:{},xhrFields:{},statusCode:{},processData:!0,dataType:"text",contentType:"application/x-www-form-urlencoded",timeout:0};e.type&&(e.method=e.type);for(var i in a)i in e||(e[i]=a[i]);e.url||(e.url=window.location.toString());var o=e.method.toUpperCase();if(("GET"===o||"HEAD"===o)&&e.data){var r;r="string"==typeof e.data?e.data.indexOf("?")>=0?e.data.split("?")[1]:e.data:t.serializeObject(e.data),e.url+=e.url.indexOf("?")>=0?"&"+r:"?"+r}if("json"===e.dataType&&e.url.indexOf("callback=")>=0){var s,l,c="f7jsonp_"+Date.now()+n++,d=e.url.split("callback=");if(d[1].indexOf("&")>=0){var p=d[1].split("&").filter(function(e){return e.indexOf("=")>0}).join("&");s=d[0]+"callback="+c+(p.length>0?"&"+p:"")}else s=d[0]+"callback="+c;var u=document.createElement("script");return u.type="text/javascript",u.onerror=function(){clearTimeout(l),e.error&&e.error()},u.src=s,window[c]=function(t){clearTimeout(l),e.success&&e.success(t),u.parentNode.removeChild(u),u=null,delete window[c]},document.querySelector("head").appendChild(u),void(e.timeout>0&&(l=setTimeout(function(){u.parentNode.removeChild(u),u=null,e.error&&e.error()},e.timeout)))}("GET"===o||"HEAD"===o)&&e.cache===!1&&(e.url+="_nocache="+Date.now());var f=new XMLHttpRequest;f.open(o,e.url,e.async,e.user,e.password);var h=null;if(("POST"===o||"PUT"===o)&&e.data)if(e.processData){var m=[ArrayBuffer,Blob,Document,FormData];if(m.indexOf(e.data.constructor)>=0)h=e.data;else{var v="---------------------------"+Date.now().toString(16);"multipart/form-data"===e.contentType?f.setRequestHeader("Content-Type","multipart/form-data; boundary="+v):f.setRequestHeader("Content-Type",e.contentType),h="";var g=t.serializeObject(e.data);if("multipart/form-data"===e.contentType){v="---------------------------"+Date.now().toString(16),g=g.split("&");for(var b=[],w=0;w<g.length;w++)b.push('Content-Disposition: form-data; name="'+g[w].split("=")[0]+'"\r\n\r\n'+g[w].split("=")[1]+"\r\n");h="--"+v+"\r\n"+b.join("--"+v+"\r\n")+"--"+v+"--\r\n"}else h="application/x-www-form-urlencoded"===e.contentType?g:g.replace(/&/g,"\r\n")}}else h=e.data;if(e.headers)for(var C in e.headers)f.setRequestHeader(C,e.headers[C]);if("undefined"==typeof e.crossDomain&&(e.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(e.url)&&RegExp.$2!==window.location.host),e.crossDomain||f.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.xhrFields)for(var x in e.xhrFields)f[x]=e.xhrFields[x];return f.onload=function(){if((200===f.status||0===f.status)&&(t(document).trigger("ajaxSuccess",{xhr:f}),e.success)){var n=f.responseText;"json"===e.dataType&&(n=JSON.parse(n)),e.success(n,f.status,f)}e.statusCode&&e.statusCode[f.status]&&e.statusCode[f.status](f),e.complete&&e.complete(f),t(document).trigger("ajaxComplete",{xhr:f})},f.onerror=function(){t(document).trigger("ajaxError",{xhr:f}),e.error&&e.error(f)},e.start&&e.start(f),t(document).trigger("ajaxStart",{xhr:f}),f.send(h),f},function(){function e(e){t[e]=function(n,a,i){return t.ajax({url:n,method:"post"===e?"POST":"GET",data:"function"==typeof a?void 0:a,success:"function"==typeof a?a:i,dataType:"getJSON"===e?"json":void 0})}}for(var n="get post getJSON".split(" "),a=0;a<n.length;a++)e(n[a])}(),t.parseUrlQuery=function(e){var t,n,a,i={};if(!(e.indexOf("?")>=0))return i;for(e=e.split("?")[1],n=e.split("&"),t=0;t<n.length;t++)a=n[t].split("="),i[a[0]]=a[1];return i},t.isArray=function(e){return"[object Array]"===Object.prototype.toString.apply(e)?!0:!1},t.unique=function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t},t.trim=function(e){return e.trim()},t.serializeObject=function(e){if("string"==typeof e)return e;var n=[],a="&";for(var i in e)if(t.isArray(e[i])){for(var o=[],r=0;r<e[i].length;r++)o.push(i+"="+e[i][r]);n.push(o.join(a))}else n.push(i+"="+e[i]);return n.join(a)},t.getTranslate=function(e,t){var n,a,i,o;return"undefined"==typeof t&&(t="x"),i=window.getComputedStyle(e,null),window.WebKitCSSMatrix?o=new WebKitCSSMatrix("none"===i.webkitTransform?"":i.webkitTransform):(o=i.MozTransform||i.OTransform||i.MsTransform||i.msTransform||i.transform||i.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=o.toString().split(",")),"x"===t&&(a=window.WebKitCSSMatrix?o.m41:parseFloat(16===n.length?n[12]:n[4])),"y"===t&&(a=window.WebKitCSSMatrix?o.m42:parseFloat(16===n.length?n[13]:n[5])),a||0},t.requestAnimationFrame=function(e){return window.requestAnimationFrame?window.requestAnimationFrame(e):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(e):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(e):window.setTimeout(e,1e3/60)},t.supportTouch=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch),t.fn=e.prototype,t.fn.scrollTo=function(e,n,a){return this.each(function(){function i(e){void 0===e&&(e=(new Date).getTime()),null===v&&(v=e);var n;h&&(p=o+(e-v)/a*(c-o)),m&&(u=r+(e-v)/a*(d-r)),h&&c>o&&p>=c&&(f.scrollTop=c,n=!0),h&&o>c&&c>=p&&(f.scrollTop=c,n=!0),m&&d>r&&u>=d&&(f.scrollLeft=d,n=!0),m&&r>d&&d>=u&&(f.scrollLeft=d,n=!0),n||(h&&(f.scrollTop=p),m&&(f.scrollLeft=u),t.requestAnimationFrame(i))}var o,r,s,l,c,d,p,u,f=this,h=n>0||0===n,m=e>0||0===e;if(h&&(o=f.scrollTop,a||(f.scrollTop=n)),m&&(r=f.scrollLeft,a||(f.scrollLeft=e)),a){h&&(s=f.scrollHeight-f.offsetHeight,c=Math.max(Math.min(n,s),0)),m&&(l=f.scrollWidth-f.offsetWidth,d=Math.max(Math.min(e,l),0));var v=null;h&&c===o&&(h=!1),m&&d===r&&(m=!1),t.requestAnimationFrame(i)}})},t.fn.scrollTop=function(e,t){var n=this;return"undefined"==typeof e?n.length>0?n[0].scrollTop:null:n.scrollTo(void 0,e,t)},t.fn.scrollLeft=function(e,t){var n=this;return"undefined"==typeof e?n.length>0?n[0].scrollLeft:null:n.scrollTo(e,void 0,t)},t}();Framework7.$=e;window.Dom7=e,Framework7.prototype.support=function(){var e={touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)};return e}(),Framework7.prototype.device=function(){var t={},n=navigator.userAgent,a=e,i=n.match(/(Android);?[\s\/]+([\d.]+)?/),o=n.match(/(iPad).*OS\s([\d_]+)/),r=n.match(/(iPod)(.*OS\s([\d_]+))?/),s=!o&&n.match(/(iPhone\sOS)\s([\d_]+)/);if(t.ios=t.android=t.iphone=t.ipad=!1,i&&(t.os="android",t.osVersion=i[2],t.android=!0),(o||s||r)&&(t.os="ios",t.ios=!0),s&&!r&&(t.osVersion=s[2].replace(/_/g,"."),t.iphone=!0),o&&(t.osVersion=o[2].replace(/_/g,"."),t.ipad=!0),r&&(t.osVersion=r[3]?r[3].replace(/_/g,"."):null,t.iphone=!0),t.ios&&t.osVersion&&n.indexOf("Version/")>=0&&"10"===t.osVersion.split(".")[0]&&(t.osVersion=n.toLowerCase().split("version/")[1].split(" ")[0]),t.webView=(s||o||r)&&n.match(/.*AppleWebKit(?!.*Safari)/i),t.os&&"ios"===t.os){var l=t.osVersion.split(".");t.minimalUi=!t.webView&&(r||s)&&(1*l[0]===7?1*l[1]>=1:1*l[0]>7)&&a('meta[name="viewport"]').length>0&&a('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}var c=a(window).width(),d=a(window).height();t.statusBar=!1,t.statusBar=t.webView&&c*d===screen.width*screen.height?!0:!1;var p=[];if(t.pixelRatio=window.devicePixelRatio||1,t.pixelRatio>=2&&p.push("retina"),t.os&&(p.push(t.os,t.os+"-"+t.osVersion.split(".")[0],t.os+"-"+t.osVersion.replace(/\./g,"-")),"ios"===t.os))for(var u=parseInt(t.osVersion.split(".")[0],10),f=u-1;f>=6;f--)p.push("ios-gt-"+f);return t.statusBar?p.push("with-statusbar-overlay"):a("html").removeClass("with-statusbar-overlay"),p.length>0&&a("html").addClass(p.join(" ")),t}(),Framework7.prototype.plugins={}}(),window.Template7=function(){"use strict";function e(e){return"[object Array]"===Object.prototype.toString.apply(e)}function t(e){return"function"==typeof e}function n(e){var t,n,a,i=e.replace(/[{}#}]/g,"").split(" "),o=[];for(n=0;n<i.length;n++){var r=i[n];if(0===n)o.push(r);else if(0===r.indexOf('"'))if(2===r.match(/"/g).length)o.push(r);else{for(t=0,a=n+1;a<i.length;a++)if(r+=" "+i[a],i[a].indexOf('"')>=0){t=a,o.push(r);break}t&&(n=t)}else if(r.indexOf("=")>0){var s=r.split("="),l=s[0],c=s[1];if(2!==c.match(/"/g).length){for(t=0,a=n+1;a<i.length;a++)if(c+=" "+i[a],i[a].indexOf('"')>=0){t=a;break}t&&(n=t)}var d=[l,c.replace(/"/g,"")];o.push(d)}else o.push(r)}return o}function a(t){var a,i,o=[];if(!t)return[];var r=t.split(/({{[^{^}]*}})/);for(a=0;a<r.length;a++){var s=r[a];if(""!==s)if(s.indexOf("{{")<0)o.push({type:"plain",content:s});else{if(s.indexOf("{/")>=0)continue;if(s.indexOf("{#")<0&&s.indexOf(" ")<0&&s.indexOf("else")<0){o.push({type:"variable",contextName:s.replace(/[{}]/g,"")});continue}var l=n(s),c=l[0],d=[],p={};for(i=1;i<l.length;i++){var u=l[i];e(u)?p[u[0]]="false"===u[1]?!1:u[1]:d.push(u)}if(s.indexOf("{#")>=0){var f,h="",m="",v=0,g=!1,b=!1,w=0;for(i=a+1;i<r.length;i++)if(r[i].indexOf("{{#")>=0&&w++,r[i].indexOf("{{/")>=0&&w--,r[i].indexOf("{{#"+c)>=0)h+=r[i],b&&(m+=r[i]),v++;else if(r[i].indexOf("{{/"+c)>=0){if(!(v>0)){f=i,g=!0;break}v--,h+=r[i],b&&(m+=r[i])}else r[i].indexOf("else")>=0&&0===w?b=!0:(b||(h+=r[i]),b&&(m+=r[i]));g&&(f&&(a=f),o.push({type:"helper",helperName:c,contextName:d,content:h,inverseContent:m,hash:p}))}else s.indexOf(" ")>0&&o.push({type:"helper",helperName:c,contextName:d,hash:p})}}return o}var i=function(e,t){function n(e,t){return e.content?s(e.content,t):function(){return""}}function i(e,t){return e.inverseContent?s(e.inverseContent,t):function(){return""}}function o(e,t){var n;if(e.indexOf(".")>0)n=0===e.indexOf("this")?e.replace("this",t):t+"."+e;else if(0===e.indexOf("../")){var a=e.split("../").length-1,i=e.split("../")[e.split("../").length-1],o=t.split("_")[1]-a;n="ctx_"+(o>=1?o:1)+"."+i}else n="this"===e?t:t+"."+e;return e&&e.indexOf("@")>=0&&(n="(data && data."+e.replace("@","")+")"),n}function r(e,t){for(var n=[],a=0;a<e.length;a++)n.push(0===e[a].indexOf('"')?e[a]:o(e[a],t));return n.join(", ")}function s(e,t){if(t=t||1,e=e||l.template,"string"!=typeof e)throw new Error("Template7: Template must be a string");var s=a(e);if(0===s.length)return function(){return""};var c="ctx_"+t,d="(function ("+c+", data) {\n";1===t&&(d+="function isArray(arr){return Object.prototype.toString.apply(arr) === '[object Array]';}\n",d+="function isFunction(func){return (typeof func === 'function');}\n",d+='function c(val, ctx) {if (typeof val !== "undefined") {if (isFunction(val)) {return val.call(ctx);} else return val;} else return "";}\n'),d+="var r = '';\n";var p;for(p=0;p<s.length;p++){var u=s[p];if("plain"!==u.type){var f,h;if("variable"===u.type&&(f=o(u.contextName,c),d+="r += c("+f+", "+c+");"),"helper"===u.type)if(u.helperName in l.helpers)h=r(u.contextName,c),d+="r += (Template7.helpers."+u.helperName+").call("+c+", "+h+", {hash:"+JSON.stringify(u.hash)+", data: data || {}, fn: "+n(u,t+1)+", inverse: "+i(u,t+1)+"});";else{if(u.contextName.length>0)throw new Error('Template7: Missing helper: "'+u.helperName+'"');f=o(u.helperName,c),d+="if ("+f+") {",d+="if (isArray("+f+")) {",d+="r += (Template7.helpers.each).call("+c+", "+f+", {hash:"+JSON.stringify(u.hash)+", data: data || {}, fn: "+n(u,t+1)+", inverse: "+i(u,t+1)+"});",d+="}else {",d+="r += (Template7.helpers.with).call("+c+", "+f+", {hash:"+JSON.stringify(u.hash)+", data: data || {}, fn: "+n(u,t+1)+", inverse: "+i(u,t+1)+"});",d+="}}"}}else d+="r +='"+u.content.replace(/\n/g,"\\n").replace(/'/g,"\\'")+"';"}return d+="\nreturn r;})",eval.call(window,d)}var l=this;l.template=e,l.context=t,l.compile=function(e){return l.compiled||(l.compiled=s(e)),l.compiled}};i.prototype={options:{},helpers:{"if":function(e,n){return t(e)&&(e=e.call(this)),e?n.fn(this,n.data):n.inverse(this,n.data)},unless:function(e,n){return t(e)&&(e=e.call(this)),e?n.inverse(this,n.data):n.fn(this,n.data)},each:function(n,a){var i="",o=0;if(t(n)&&(n=n.call(this)),e(n)){for(a.hash.reverse&&(n=n.reverse()),o=0;o<n.length;o++)i+=a.fn(n[o],{first:0===o,last:o===n.length-1,index:o});a.hash.reverse&&(n=n.reverse())}else for(var r in n)o++,i+=a.fn(n[r],{key:r});return o>0?i:a.inverse(this)},"with":function(e,n){return t(e)&&(e=e.call(this)),n.fn(e)},join:function(e,n){return t(e)&&(e=e.call(this)),e.join(n.hash.delimeter)}}};var o=function(e,t){if(2===arguments.length){var n=new i(e),a=n.compile()(t);return n=null,a}return new i(e)};return o.registerHelper=function(e,t){i.prototype.helpers[e]=t},o.compile=function(e){var t=new i(e);return t.compile()},o.options=i.prototype.options,o.helpers=i.prototype.helpers,o}(),define("Framework7",function(e){return function(){var t;return t||e.Framework7}}(this)),define("services/openTypeService",[],function(){function e(){return o}function t(e){for(var t=0;t<a.length;t++)if(e===a[t].type)return a[t]}function n(){return i.length>1?"guide.html":1===i.length?"login.html?type="+o[0].type:void 0}for(var a=[{type:"1",name:"kh",title:"",explain:""},{type:"3",name:"zh",title:"",explain:""},{type:"5",name:"lch",title:"",explain:""},{type:"7",name:"ggt",title:"",explain:""}],i=window.appParams.openType,o=[],r=0;r<i.length;r++)for(var s=0;s<a.length;s++)i[r]===a[s].type&&o.push(a[s]);return{getCurrentTypeData:e,getTypeData:t,setStartPage:n}}),define("GS",["services/openTypeService"],function(e){function t(){c||(c={},c.currentUser={},localStorage.getItem("user")&&(c.currentUser=JSON.parse(localStorage.getItem("user"))),localStorage.getItem("sid")&&(c.currentUser.sid=localStorage.getItem("sid")))}function n(){return c.currentUser}function a(){var e=$$.parseUrlQuery(window.location.href||"");return e.sid||localStorage.getItem("sid")}function i(e,t){c.currentUser=t,localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("sid",e)}function o(){c.currentUser={},localStorage.removeItem("user"),localStorage.removeItem("sid")}function r(){return c.currentUser&&localStorage.getItem("sid")?!0:!1}function s(){khApp.confirm("",function(){var e=$$(".page-on-center").data("page");o(),khApp.closeModal(),khApp.closePanel(),"video"===e&&(clearTimeout(window.videoQueryTimer),console.log("quit video query successful")),mainView.loadPage(d)})}function l(){khApp.modal({title:"",text:window.appParams.version,buttons:[{text:"",onClick:function(){khApp.alert("")}},{text:""}]})}var c=null;t();var d=e.setStartPage();return{getSid:a,getCurrentUser:n,setCurrentUser:i,removeCurrentUser:o,isLogin:r,logout:s,checkUpdate:l,startPage:d}}),define("router",["GS"],function(e){function t(){if($$(document).on("pageBeforeInit",function(e){var t=e.detail.page;n(t.name,t.query)}),$$(".logout").on("click",e.logout),$$(".version").on("click",e.checkUpdate),khApp.device.android&&$$("body").on("touchend",".smart-select-page li",function(e){e.stopPropagation()}),e.isLogin()){var t=e.getCurrentUser();mainView.loadPage(t.node+".html")}else mainView.loadPage(e.startPage,!1)}function n(e,t){e&&-1===e.indexOf("smart-select")&&require(["controllers/"+e+"Controller"],function(e){e.init(t)})}return{init:t,load:n}}),require.config({baseUrl:"js",paths:{Framework7:"libs/framework7",text:"libs/text",GS:"services/globalService",tpl:"../tpl",popup:"../popup"},shim:{Framework7:{exports:"Framework7"}}}),require(["Framework7","router"],function(e,t){window.$$=window.Dom7;var n=e.prototype.device;window.khApp=new e(n.android?{animatePages:!1,swipeout:!1,sortable:!1,cache:!1,pushState:!1,swipeBackPage:!1,preloadPreviousPage:!1,popupCloseByOutside:!1,animateNavBackIcon:!0,modalTitle:"",modalButtonOk:"",modalButtonCancel:"",smartSelectBackText:"",smartSelectBackTemplate:'<div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><span>{{backText}}</span></a></div>'}:{cache:!1,pushState:!1,swipeBackPage:!1,preloadPreviousPage:!1,popupCloseByOutside:!1,animateNavBackIcon:!0,modalTitle:"",modalButtonOk:"",modalButtonCancel:"",smartSelectBackText:"",smartSelectBackTemplate:'<div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><span>{{backText}}</span></a></div>'}),window.mainView=khApp.addView("#mainView",{dynamicNavbar:!0}),t.init()}),define("app",function(){}),define("utils",[],function(){function e(e){if($$.isArray(e)&&e.length>0)for(var t in e)$$(e[t].element).on(e[t].event,e[t].handler)}function t(e){var t=$$(e).parents(".page-content");$$(e).removeClass("fixed-bottom"),n(t[0])||$$(e).addClass("fixed-bottom")}function n(e){return e.scrollHeight>e.clientHeight}return{bindEvents:e,setButtonPosition:t}}),define("views/accountView",["utils"],function(e){function t(t){var n=$$("#accountTemplate").html(),a=Template7.compile(n),i=a({model:t.model});$$("#accountList").append(i),e.bindEvents(t.bindings)}function n(e){$$(".sliding").html(e+"")}return{render:t,renderTitle:n}}),define("controllers/accountController",["views/accountView"],function(e){function t(t){var n=decodeURI(t.value),a=t.title;e.renderTitle(a),$$.ajax({url:"api/account.json",type:"GET",data:{title:a},success:function(t){t=JSON.parse(t),0===t.errorNo&&(e.render({model:t.model,bindings:r}),$$('#accountList input[type="checkbox"]').each(function(){-1!==n.indexOf(this.value)&&(this.checked=!0)}))}})}function n(){var e,t,n=$$('#accountList input[type="checkbox"]'),a=[];n.each(function(){e=$$('#signContent input[name="'+this.name+'"]'),this.checked=!0,a.push(this.value),t=a.join(" "),e.val(t),e[0].checked=0===t.length?!1:!0})}function a(){var e,t=$$('#signContent input[name="'+this.name+'"]'),n=this,a=this.value;t.each(function(){n.checked?i(this,a):o(this,a),e=this.value,this.checked=0===e.length?!1:!0})}function i(e,t){if("undefined"!=typeof e.value)if(0===e.value.length)$$(e).val(t);else{var n=e.value.split(" ");-1===n.indexOf(t)&&n.push(t),$$(e).val(n.join(" "))}}function o(e,t){var n=e.value.split(" ");if(-1!==n.indexOf(t))if(1===n.length)$$(e).val("");else{var a=[];n.map(function(e){e!==t&&a.push(e)}),$$(e).val(a.join(" "))
}}var r=[{element:".select-all",event:"click",handler:n},{element:'#accountList input[type="checkbox"]',event:"change",handler:a}];return{init:t}}),define("views/signView",["utils"],function(e){function t(t){var n=$$("#signTemplate").html(),a=Template7.compile(n),i=a({model:t.model});$$("#signContent").append(i),e.bindEvents(t.bindings),e.setButtonPosition(".sign-next-button")}return{render:t}}),define("controllers/signController",["views/signView"],function(e){function t(){khApp.showIndicator(),$$.ajax({url:"api/sign.json",type:"GET",success:function(t){if(t=JSON.parse(t),0===t.errorNo){var a=t.model;e.render({bindings:r,model:a}),n(),khApp.hideIndicator()}}})}function n(){var e=$$('#signContent input[type="radio"]');e.each(function(){0!==this.value.length&&(this.checked=!0)})}function a(e){var t=$$(e).parent().find('input[type="radio"]');return t.val()}function i(){var e=a(this),t=$$(this).text();mainView.loadPage("select/account.html?title="+t+"&value="+e)}function o(){mainView.loadPage("password.html")}var r=[{element:".select-trigger",event:"click",handler:i},{element:".sign-next-button",event:"click",handler:o}];return{init:t}}),define("views/appointView",["utils"],function(e){function t(t){e.bindEvents(t.bindings)}return{render:t}}),define("controllers/appointController",["views/appointView","GS"],function(e,t){function n(){e.render({bindings:i})}function a(){var e=khApp.formToJSON("#appointContent");console.log(e),mainView.loadPage(t.startPage)}var i=[{element:".appoint-done-button",event:"click",handler:a}];return{init:n}}),define("views/auditView",["utils"],function(e){function t(t){var n=$$("#auditTemplate").html(),a=Template7.compile(n),i=a({model:t.model});$$("#auditContent").append(i),e.bindEvents(t.bindings)}return{render:t}}),define("controllers/auditController",["views/auditView"],function(e){function t(){khApp.modal({title:'<span class="dlg-highlight">765,443.23</span>',text:'<p class="dlg-lowlight"></p>',buttons:[{text:'<span class="dlg-cancel-btn"></span>',onClick:function(){}},{text:'<span class="dlg-confirm-btn"></span>',onClick:function(){}}]})}function n(){khApp.showIndicator(),$$.ajax({url:"api/audit.json",type:"GET",success:function(t){t=JSON.parse(t),0===t.errorNo&&(e.render({model:t.model,bindings:a}),khApp.hideIndicator())}})}var a=[{element:".search-button",event:"click",handler:t}];return{init:n}}),define("text",["module"],function(e){"use strict";var t,n,a,i,o,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,d=c&&location.protocol&&location.protocol.replace(/\:/,""),p=c&&location.hostname,u=c&&(location.port||void 0),f={},h=e.config&&e.config()||{};return t={version:"2.0.12",strip:function(e){if(e){e=e.replace(s,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:h.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(a){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,a,i=!1,o=e.indexOf("."),r=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!r||o>1)?(t=e.substring(0,o),n=e.substring(o+1,e.length)):t=e,a=n||t,o=a.indexOf("!"),-1!==o&&(i="strip"===a.substring(o+1),a=a.substring(0,o),n?n=a:t=a),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,a,i){var o,r,s,l=t.xdRegExp.exec(e);return l?(o=l[2],r=l[3],r=r.split(":"),s=r[1],r=r[0],!(o&&o!==n||r&&r.toLowerCase()!==a.toLowerCase()||(s||r)&&s!==i)):!0},finishLoad:function(e,n,a,i){a=n?t.strip(a):a,h.isBuild&&(f[e]=a),i(a)},load:function(e,n,a,i){if(i&&i.isBuild&&!i.inlineText)return void a();h.isBuild=i&&i.isBuild;var o=t.parseName(e),r=o.moduleName+(o.ext?"."+o.ext:""),s=n.toUrl(r),l=h.useXhr||t.useXhr;return 0===s.indexOf("empty:")?void a():void(!c||l(s,d,p,u)?t.get(s,function(n){t.finishLoad(e,o.strip,n,a)},function(e){a.error&&a.error(e)}):n([r],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,a)}))},write:function(e,n,a){if(f.hasOwnProperty(n)){var i=t.jsEscape(f[n]);a.asModule(e+"!"+n,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,n,a,i,o){var r=t.parseName(n),s=r.ext?"."+r.ext:"",l=r.moduleName+s,c=a.toUrl(r.moduleName+s)+".js";t.load(l,a,function(){var n=function(e){return i(c,e)};n.asModule=function(e,t){return i.asModule(e,c,t)},t.write(e,l,n,o)},o)}},"node"===h.env||!h.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,a){try{var i=n.readFileSync(e,"utf8");0===i.indexOf("")&&(i=i.substring(1)),t(i)}catch(o){a&&a(o)}}):"xhr"===h.env||!h.env&&t.createXhr()?t.get=function(e,n,a,i){var o,r=t.createXhr();if(r.open("GET",e,!0),i)for(o in i)i.hasOwnProperty(o)&&r.setRequestHeader(o.toLowerCase(),i[o]);h.onXhr&&h.onXhr(r,e),r.onreadystatechange=function(){var t,i;4===r.readyState&&(t=r.status||0,t>399&&600>t?(i=new Error(e+" HTTP status: "+t),i.xhr=r,a&&a(i)):n(r.responseText),h.onXhrComplete&&h.onXhrComplete(r,e))},r.send(null)}:"rhino"===h.env||!h.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,a,i="utf-8",o=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),i)),l="";try{for(n=new java.lang.StringBuffer,a=s.readLine(),a&&a.length()&&65279===a.charAt(0)&&(a=a.substring(1)),null!==a&&n.append(a);null!==(a=s.readLine());)n.append(r),n.append(a);l=String(n.toString())}finally{s.close()}t(l)}:("xpconnect"===h.env||!h.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(a=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in a,t.get=function(e,t){var n,r,s,l={};o&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{n=a["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(s,1,0,!1),r=a["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),r.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(n.available(),l),r.close(),n.close(),t(l.value)}catch(c){throw new Error((s&&s.path||"")+": "+c)}}),t}),define("text!popup/cert.html",[],function(){return'<div class="view view-popup navbar-fixed">\n	<div class="navbar">\n		<div class="navbar-inner">\n			<div class="center sliding">\n				\n			</div>\n		</div>\n	</div>\n	<div class="page">\n		<div class="page-content">\n		{{#if model.success}}\n			<div class="info-content vertical-align">\n				<div class="info"><i class="iconfont icon-success"></i>{{model.successText}}</div>\n			</div>\n			<div class="content-block">\n				<a href="#" class="button button-big active fixed-bottom cert-download-button"></a>\n			</div>\n		{{/if}}\n		{{#if model.fail}}\n			<div class="info-content vertical-align">\n				<div class="info"><i class="iconfont icon-fail"></i>{{model.failText}}</div>\n			</div>\n			<div class="content-block">\n				<a href="#" class="button button-big active fixed-bottom cert-retry-button"></a>\n			</div>\n		{{/if}}\n		</div>\n	</div>\n</div>\n'}),define("views/certView",["utils","text!popup/cert.html"],function(e,t){function n(t){e.bindEvents(t.bindings)}function a(n){var a=Template7.compile(t),i=a({model:n.model});$$(".popup").html(i),e.bindEvents(n.bindings)}function i(e){$$(".section").hide(),$$("#"+e).show(),khApp.closeModal()}function o(){i("download"),$$(".indicator").hide()}function r(){i("auditBefore"),$$(".indicator").show()}function s(){i("auditAfter"),$$(".indicator").show()}return{render:n,renderPopup:a,showDownloading:o,showAuditBefore:r,showAuditAfter:s}}),define("controllers/certController",["views/certView"],function(e){function t(){e.render({bindings:i}),setTimeout(e.showAuditAfter,1500)}function n(){e.showDownloading(),setTimeout(function(){var t=$$.ajax({url:"api/cert.json",type:"GET",success:function(t){t=JSON.parse(t),0===t.errorNo&&(e.renderPopup({model:t.model,bindings:o}),khApp.popup(".popup"))}});t.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;console.log(t),$$("progress").val(t)}}},1500)}function a(){e.showAuditAfter(),khApp.closeModal(),mainView.loadPage("sign.html")}var i=[{element:".cert-request-button",event:"click",handler:n}],o=[{element:".cert-download-button",event:"click",handler:a},{element:".cert-retry-button",event:"click",handler:n}];return{init:t}}),define("views/collectView",["utils"],function(e){function t(t){var n=$$("#collectTemplate").html(),a=Template7.compile(n),i=a({model:t.model});$$("#collectContent").html(i),e.bindEvents(t.bindings)}function n(e){$$("#cardFront").html("<img src="+e+' alt="" height="160">')}function a(e){$$("#cardBack").html("<img src="+e+' alt="" height="160">')}function i(e){$$("#face").html("<img src="+e+' alt="" height="160">')}return{render:t,showPhotoFront:n,showPhotoBack:a,showPhotoFace:i}}),define("controllers/collectController",["views/collectView"],function(e){function t(){$$.ajax({url:"api/collect.json",type:"GET",success:function(t){t=JSON.parse(t),0===t.errorNo?e.render({model:t.model,bindings:o}):khApp.alert(t.errorInfo)}})}function n(){}function a(){}function i(){mainView.loadPage("profile.html")}var o=[{element:".collect-next-button",event:"click",handler:i},{element:"#cardFront",event:"click",handler:n},{element:"#cardBack",event:"click",handler:a}];return{init:t}}),define("views/departmentView",["utils"],function(e){function t(t){e.bindEvents(t.bindings),e.setButtonPosition(".department-next-button")}function n(t){var n=$$("#departmentTemplate").html(),a=Template7.compile(n),i=a({model:t.model});$$("#departmentContent").append(i),e.bindEvents(t.bindings),o()}function a(e){$$(".department-name").find("h2").text(e)}function i(){$$(".department-badge").html("")}function o(){$$(".smart-select select").each(function(){this.selectedIndex=-1})}return{render:t,renderName:a,renderBadge:i,renderSelect:n}}),define("controllers/departmentController",["views/departmentView"],function(e){function t(){e.render({bindings:c})}function n(){i("nearbySelect","api/deps-near.json")}function a(){i("allSelect","api/deps-all.json")}function i(e,t){var n=$$("#"+e)[0];n?r(e):o(e,t)}function o(t,n){var a=t;khApp.showIndicator(),$$.ajax({url:n,type:"GET",success:function(t){t=JSON.parse(t),0===t.errorNo&&(e.renderSelect({bindings:d,model:t.model}),khApp.hideIndicator(),r(a))}})}function r(e){khApp.smartSelectOpen("#"+e)}function s(){var t=this.options[this.selectedIndex].text;e.renderName(t),e.renderBadge()}function l(){mainView.loadPage("collect.html")}var c=[{element:".department-next-button",event:"click",handler:l},{element:".nearby-link",event:"click",handler:n},{element:".all-link",event:"click",handler:a}],d=[{element:"[name=nearby]",event:"change",handler:s},{element:"[name=all]",event:"change",handler:s}];return{init:t}}),define("controllers/departmentsController",["views/departmentView"],function(e){function t(t){e.render({bindings:c}),t.depsname&&(e.renderName(t.depsname),e.renderBadge())}function n(){i("nearbySelect","api/deps-near.json")}function a(){mainView.loadPage("select/prov.html")}function i(e,t){var n=$$("#"+e)[0];n?r(e):o(e,t)}function o(t,n){var a=t;khApp.showIndicator(),$$.ajax({url:n,type:"GET",success:function(t){t=JSON.parse(t),0===t.errorNo&&(e.renderSelect({bindings:d,model:t.model}),khApp.hideIndicator(),r(a))}})}function r(e){khApp.smartSelectOpen("#"+e)}function s(){var t=this.options[this.selectedIndex].text;e.renderName(t),e.renderBadge()}function l(){mainView.loadPage("collect.html")}var c=[{element:".department-next-button",event:"click",handler:l},{element:".nearby-link",event:"click",handler:n},{element:".all-link",event:"click",handler:a}],d=[{element:"[name=nearby]",event:"change",handler:s},{element:"[name=all]",event:"change",handler:s}];return{init:t}}),define("views/depositoryView",["utils"],function(e){function t(t){var n=$$("#depositoryTemplate").html(),a=Template7.compile(n),i=a({bankList:t.model});$$("#depositoryContent").html(i),e.bindEvents(t.bindings)}return{render:t}}),define("controllers/depositoryController",["views/depositoryView"],function(e){function t(){khApp.showIndicator(),$$.ajax({url:"api/depository.json",type:"GET",success:function(t){t=JSON.parse(t),0===t.errorNo&&e.render({model:t.bankList,bindings:a}),khApp.hideIndicator()}})}function n(){var e=$$(this).find(".bank-name").text(),t=$$(this).data("type"),n=$$(this).data("cls"),a=$$(this).data("hint"),i=$$(this).data("protocal-id");mainView.loadPage(["depository-detail.html","?name="+e,"&type="+t,"&cls="+n,"&econtract_id="+i,a?"&hint="+a:""].join(""))}var a=[{element:".depository-list a",event:"click",handler:n}];return{init:t}}),define("views/depositoryDetailView",["utils"],function(e){function t(t){e.bindEvents(t.bindings),t.hint&&$$("#depositoryDetail .text-hint").html(t.hint)}function n(){$$("#inputGroup").hide(),$$("#agreeProtocal").show(),$$("#agreeProtocal").css("display","-webkit-flex")}function a(){$$("#inputGroup").show(),$$("#agreeProtocal").show(),$$("#agreeProtocal").css("display","-webkit-flex"),$$(".cardno-input").show().addClass("bare"),$$(".cardpsw-input").hide()}function i(){$$("#inputGroup").show(),$$("#agreeProtocal").show(),$$("#agreeProtocal").css("display","-webkit-flex"),$$(".cardno-input").show().removeClass("bare"),$$(".cardpsw-input").show()}function o(e,t){var n=document.querySelector("#protocalLink");r(n,t),$$("#bankName").text(e)}function r(e,t){e.search="?econtract_id="+t}function s(e){$$(".navbar").find(".sliding").eq(1).text(e)}function l(e){var t='<i class="iconfont icon-'+e.cls+'"></i>',n='<span class="bank-name">'+e.name+"</span>";$$(".deposit-holder").html(t+n)}return{init:t,noNeedInput:n,onlyCardNoInput:a,bothCardNoPswInput:i,syncProtocal:o,changeTitle:s,logo:l}}),define("controllers/depositoryDetailController",["views/depositoryDetailView"],function(e){function t(t){console.log(t);var n=t.type,i=t.name,o=t.econtract_id,r=t.hint,s=t.cls;switch(e.init({bindings:a,hint:r}),e.changeTitle(i),e.logo({name:i,cls:s}),n){case"00":e.noNeedInput();break;case"01":e.onlyCardNoInput();break;case"11":e.bothCardNoPswInput()}e.syncProtocal(i,o)}function n(){mainView.loadPage("risk.html")}var a=[{element:".depository-next-button",event:"click",handler:n}];return{init:t}}),define("views/guideView",["utils"],function(e){function t(t){var n=$$("#guideTemplate").html(),a=Template7.compile(n),i=a({model:t.model});$$("#guideContent").append(i),e.bindEvents(t.bindings)}return{render:t}}),define("controllers/guideController",["views/guideView","services/openTypeService"],function(e,t){function n(){e.render({model:m,bindings:v}),i(),o()}function a(){var e=$$(this),t=$$(this).attr("class").split(" ")[1],n=h(),a=$$(".label."+n),i=$$(".card."+n),o=$$(".card."+t);d(),c(i,o),f(e,a)}function i(){var e=parseInt($$(".label").css("line-height")),t=m.openTypes.length;$$(".labels").css("height",e*(t-1)+"px"),$$(".label").each(function(n){$$(this).css("top",e*(t-1-n)+"px"),$$(this).css("z-index",99-n)})}function o(){var e=h(),t=$$(".card."+e);s(t)}function r(){var e=$$("body").height(),t=$$(".labels").height();return e-t}function s(e){var t=r();e.css("opacity",100),e.css("margin-top",(t-e.outerHeight())/2+"px")}function l(e){e.css("opacity",0),e.css("margin-top","-100%"),e.transitionEnd(function(){$$(this).css("margin-top","200%"),setTimeout(p,100)})}function c(e,t){s(t),l(e)}function d(){$$(".label").attr("disabled","disabled")}function p(){$$(".label").removeAttr("disabled")}function u(){var e=$$(this).data("type");mainView.loadPage("login.html?type="+e)}function f(e,t){var n=$$(e).css("top"),a=$$(e).css("z-index"),i=t.css("top"),o=t.css("z-index");e.css("top",i),e.css("z-index",o),t.css("top",n),t.css("z-index",a)}function h(){var e=[];return $$(".label").each(function(){var t=e.length,n=parseInt($$(this).css("top")),a=$$(this).attr("class").split(" ")[1];t?e[0].top<n&&(e.pop(e[0]),e.push({cls:a,top:n})):e.push({cls:a,top:n})}),e[0].cls}var m={openTypes:t.getCurrentTypeData()},v=[{element:".label",event:"click",handler:a},{element:".action a",event:"click",handler:u}];return{init:n}}),define("views/loginView",["utils"],function(e){function t(t){e.bindEvents(t.bindings)}function n(){$$(".login-getcode").html(""),$$(".login-getcode").removeClass("disabled")}function a(e){$$(".login-getcode").html(e+"")}function i(){$$(".mobile").blur(),$$(".password").blur()}function o(e,t){$$(".sliding").html(e),$$(".desc").html(t)}return{init:t,resetBtn:n,reRenderBtn:a,inputBlur:i,changeType:o}}),define("controllers/loginController",["views/loginView","GS","services/openTypeService"],function(e,t,n){function a(t){var n=t.type;i(n),e.init({bindings:u})}function i(t){var a=n.getTypeData(t);e.changeType(a.title,a.explain)}function o(e){var t=/^[1][34578]\d{9}$/;return t.test(e)}function r(e){var t=/^\d{4}$/;return t.test(e)}function s(){f&&clearTimeout(f),e.resetBtn()}function l(){var e=$$(".mobile").val();o(e)?c.call(this,e):khApp.alert("")}function c(e){var t=this,n=60,a=0;$$.ajax({url:"api/verify.json",type:"GET",data:{mphone:e},success:function(e){e=JSON.parse(e),0===e.errorNo?($$(t).hasClass("disabled")||$$(t).addClass("disabled"),d(n,a)):(khApp.alert(e.errorInfo),s())},error:function(){khApp.alert(""),s()},timeout:function(){khApp.alert(""),s()}})}function d(t,n){var a;f&&clearTimeout(f),n++,a=t-n,e.reRenderBtn(a),a>0?f=setTimeout(function(){d(t,n)},1e3):e.resetBtn()}function p(){var n=$$(".mobile").val(),a=$$(".password").val();o(n)?f?r(a)?(khApp.showIndicator(),$$.ajax({url:"api/login.json",type:"GET",data:{mobile:n,validateCode:a},success:function(n){n=JSON.parse(n),0===n.errorNo?(e.inputBlur(),t.setCurrentUser(n.sid,n.user),mainView.loadPage("department.html"),khApp.hideIndicator()):(khApp.hideIndicator(),khApp.alert(n.errorInfo)),s()}})):khApp.alert("4"):khApp.alert(""):khApp.alert("")}var u=[{element:".login-submit",event:"click",handler:p},{element:".login-getcode",event:"click",handler:l}],f=null;return{init:a}}),define("views/passwordView",["utils"],function(e){function t(t){e.bindEvents(t.bindings),n()}function n(){e.setButtonPosition(".password-next-button")}function a(e){"hide"===e?$$("#sync").hide():"show"===e&&$$("#sync").show(),n()}return{render:t,toggleInputs:a}}),define("controllers/passwordController",["views/passwordView"],function(e){function t(){e.render({bindings:o})}function n(){setTimeout(a,100)}function a(){var t=document.querySelector("#checkSync");e.toggleInputs(t.checked?"hide":"show")}function i(){mainView.loadPage("depository.html")}var o=[{element:".password-next-button",event:"click",handler:i},{element:"#toggleSwitch",event:"click",handler:n}];return{init:t}}),define("views/profileView",["utils"],function(e){function t(t){e.bindEvents(t.bindings)}function n(t){var n=$$("#profileTemplate").html(),i=Template7.compile(n),o=i({model:t.model});$$("#profileContent").append(o),e.bindEvents(t.bindings),a()}function a(){$$(".smart-select select").each(function(){this.selectedIndex=-1})}return{init:t,render:n}}),define("controllers/profileController",["views/profileView"],function(e){function t(){khApp.showIndicator(),$$.ajax({url:"api/profile.json",type:"GET",success:function(t){if(t=JSON.parse(t),0===t.errorNo){var n=t.model;e.render({bindings:a,model:n}),khApp.hideIndicator()}}})}function n(){mainView.loadPage("videotype.html")}var a=[{element:".profile-next-button",event:"click",handler:n}];return{init:t}}),define("views/protocalView",[],function(){function e(e){var t=$$("#protocalTemplate").html(),n=Template7.compile(t),a=n({model:e.model});$$("#protocalContent").append(a)}return{render:e}}),define("controllers/protocalController",["views/protocalView"],function(e){function t(e){console.log(e),n(e)}function n(t){khApp.showIndicator(),$$.ajax({url:"api/protocal.json",type:"GET",data:t,success:function(t){t=JSON.parse(t),0===t.errorNo&&e.render({model:t.model}),khApp.hideIndicator()}})}return{init:t}}),define("views/reviewView",["utils"],function(e){function t(t){var n=$$("#reviewTemplate").html(),a=Template7.compile(n),i=a({model:t.model});$$("#reviewContent").append(i),e.bindEvents(t.bindings)}return{render:t}}),define("controllers/reviewController",["views/reviewView"],function(e){function t(){khApp.showIndicator(),$$.ajax({url:"api/review.json",type:"GET",success:function(t){if(t=JSON.parse(t),0===t.errorNo){var n=t.model;e.render({model:n,bindings:o}),khApp.hideIndicator()}}})}function n(){var e=i();if(e.length>0)return void khApp.alert(e[0].warn);var t,n=khApp.formToJSON("#reviewContent"),a=[];for(var o in n){var r=o+"&"+n[o];a.push(r)}t=a.join("|"),mainView.loadPage("result.html")}function a(){{var e=$$(this).parent().find("input[type=radio]");e[0].value}e[0].checked=!0}function i(){var e=[];return $$(".default").each(function(t){if(!this.checked){var n=$$(this).data("warn");e.push({index:t+1,warn:n})}}),e}var o=[{element:".review-next-button",event:"click",handler:n},{element:".select-trigger",event:"click",handler:a}];return{init:t}}),define("views/resultView",["utils"],function(e){function t(t){var n=$$("#resultTemplate").html(),a=Template7.compile(n),i=a({model:t.model});$$("#resultContent").append(i),e.bindEvents(t.bindings)}return{render:t}}),define("controllers/resultController",["views/resultView"],function(e){function t(){khApp.showIndicator(),$$.ajax({url:"api/result.json",type:"GET",success:function(t){t=JSON.parse(t),0===t.errorNo&&(e.render({model:t.model,bindings:n}),khApp.hideIndicator())}})}var n=[];return{init:t}}),define("text!popup/risk.html",[],function(){return'<div class="view view-popup navbar-fixed">\n	<div class="navbar">\n		<div class="navbar-inner">\n			<div class="center sliding">\n				\n			</div>\n		</div>\n	</div>\n	<div class="page">\n		<div class="page-content">\n			<div class="info-content vertical-align">\n				<div class="info">\n					<div id="circle_area">\n						<canvas width="190" height="170" class="gauge"></canvas>\n						<!-- <div class="result">\n							<span class="number">{{model.riskScore}}</span>\n						</div> -->\n						<div class="level"></div>\n					</div>\n					<a class="close-popup button" id="retest" href="#"></a>\n				</div>\n			</div>\n			<div class="content-block">\n				<a href="#" class="button button-big button-fill fixed-bottom risk-next-button"></a>\n			</div>\n		</div>\n	</div>\n</div>\n'}),define("views/riskView",["utils","text!popup/risk.html"],function(e,t){function n(t){var n=$$("#riskTemplate").html(),a=Template7.compile(n),i=a({model:t.model});$$("#riskContent").append(i),e.bindEvents(t.bindings)}function a(n){var a=Template7.compile(t),i=a({model:n.model});$$(".popup").html(i),e.bindEvents(n.bindings)}return{render:n,renderPopup:a}}),define("controllers/riskController",["views/riskView"],function(e){function t(){khApp.showIndicator(),$$.ajax({url:"api/risk.json",type:"GET",success:function(t){if(t=JSON.parse(t),0===t.errorNo){var n=t.model;e.render({bindings:c,model:n}),khApp.hideIndicator()}}})}function n(e){var t=$$("#topic_"+e),n=t[0].offsetTop,a=parseInt(t.css("margin-top"),10)+p;$$("#riskContent").scrollTop(n-a,200)}function a(){var e=$$(this).data("index");if("multi"!==e){var t=+e+1;setTimeout(function(e){return function(){var a=$$(e).find("input:checked");a.length>0&&n(t)}}(this),200)}}function i(){var e=[];return $$(".topic-options").each(function(t){var n=$$(this).find("input:checked");0===n.length&&e.push(t+1)}),e}function o(){var e,t=khApp.formToJSON("#riskForm"),n=[];for(var a in t){var i;i=t[a]instanceof Array?a+"&"+t[a].join("^"):a+"&"+t[a],n.push(i)}return e=n.join("|")}function r(){var t=i();if(t.length>0)return void khApp.alert(""+t[0]+"",function(){n(t[0])});var a=o();khApp.showIndicator(),$$.ajax({url:"api/risk-result.json",type:"GET",data:{answers:a},success:function(t){t=JSON.parse(t),0===t.errorNo&&(e.renderPopup({model:t.model,bindings:d}),khApp.popup(".popup"),s(t.model.riskScore/100)),khApp.hideIndicator()}})}function s(e){function t(e,t,n,a){e.clearRect(0,0,s,l),e.beginPath(),e.strokeStyle=t,e.lineWidth=6,e.arc(s/2,l/2,80,n,a,!1),e.stroke()}function n(e,n){t(e,c,130*Math.PI/180,50*Math.PI/180),e.beginPath(),e.strokeStyle=d,e.lineWidth=6,e.arc(s/2,l/2,80,130*Math.PI/180,n-230*Math.PI/180,!1),e.stroke(),e.fillStyle=d,e.font="60px PT Sans";var a=Math.floor(n/4.86*100),i=e.measureText(a).width;return e.fillText(a,s/2-i/2,l/2+20),e.font="18px PT Sans",e.fillStyle="#ccc",e.fillText("",s/2+i/2,l/2+20),n}function a(){for(var t=0,a=i.length;a>t;t++){var s=i[t].getContext("2d"),l=280*e*Math.PI/180;o.push(s),r.push(0)}var c=setInterval(function(){r[0]+=Math.PI/180;var e=n(o[0],r[0]);e>l&&clearInterval(c)},10)}var i=document.getElementsByTagName("canvas"),o=[],r=[],s=i[0].width,l=i[0].height,c="#e1e1e1",d="#e45050";a(e)}function l(){khApp.closeModal(),mainView.loadPage("review.html")}var c=[{element:".risk-submit-button",event:"click",handler:r},{element:".topic-option",event:"click",handler:a}],d=[{element:".risk-next-button",event:"click",handler:l},{element:"window",event:"load",handler:s}],p=$$(".navbar").outerHeight();return{init:t}}),define("text!popup/video.html",[],function(){return'<div class="view view-popup navbar-fixed">\n	<div class="navbar">\n		<div class="navbar-inner">\n			<div class="center sliding">\n				\n			</div>\n		</div>\n	</div>\n	<div class="page">\n		<div class="page-content">\n		{{#if model.success}}\n			<div class="info-content vertical-align">\n				<div class="info"><i class="iconfont icon-success"></i>{{model.successText}}</div>\n			</div>\n			<div class="content-block">\n				<a href="#" class="button button-big active fixed-bottom video-next-button"></a>\n			</div>\n		{{/if}}\n		{{#if model.fail}}\n			<div class="info-content vertical-align">\n				<div class="info"><i class="iconfont icon-fail"></i>{{model.failText}}</div>\n			</div>\n			<div class="content-block">\n				<a href="#" class="button button-big active fixed-bottom video-retry-button"></a>\n			</div>\n		{{/if}}\n		</div>\n	</div>\n</div>\n'}),define("views/videoView",["utils","text!popup/video.html"],function(e,t){function n(t){e.bindEvents(t.bindings)}function a(n){var a=Template7.compile(t),i=a({model:n.model});$$(".popup").html(i),e.bindEvents(n.bindings)}function i(){$$("#readyLeft").show(),$$("#waitLeft").hide(),$$(".video-content").hide(),$$("#videoReady").show()}function o(e){$$("#readyLeft").hide(),$$("#waitLeft").show(),$$(".video-content").hide(),$$("#videoWait").show(),e&&$$(".wait-num").html(e)}function r(e){"hide"===e?$$(".dialog").hide():"show"===e&&$$(".dialog").show()}return{render:n,renderPopup:a,showWait:o,showReady:i,toggleDialog:r}}),define("controllers/videoController",["views/videoView"],function(e){function t(){e.render({bindings:p})}function n(){e.showWait(),i()}function a(){if(h){if(f>=3)return e.toggleDialog("show"),void clearTimeout(d);$$.ajax({url:"api/video.json",type:"GET",success:function(t){if(t=JSON.parse(t),0===t.errorNo){var n=t.videoStatus;1===n||0===n&&(e.showWait(t.waitNum),h=!0,f++)}else khApp.alert(t.errorInfo),f++},error:function(){f++}}),d=setTimeout(a,1500),window.videoQueryTimer=d}}function i(){e.toggleDialog("hide"),f=0,a()}function o(){e.showReady(),clearTimeout(d)}function r(){e.showReady(),khApp.closeModal()}function s(){mainView.loadPage("cert.html"),khApp.closeModal()}function l(){clearTimeout(d),khApp.showIndicator(),$$.ajax({url:"api/video-success.json",type:"GET",success:function(t){t=JSON.parse(t),0===t.errorNo&&(e.renderPopup({model:t.model,bindings:u}),khApp.popup(".popup")),khApp.hideIndicator()}})}function c(){clearTimeout(d),khApp.showIndicator(),$$.ajax({url:"api/video-fail.json",type:"GET",success:function(t){t=JSON.parse(t),1===t.errorNo&&(e.renderPopup({model:t.model,bindings:u}),khApp.popup(".popup")),khApp.hideIndicator()}})}var d,p=[{element:".video-start-button",event:"click",handler:n},{element:".video-wait-button",event:"click",handler:i},{element:".video-success-button",event:"click",handler:l},{element:".video-fail-button",event:"click",handler:c},{element:"#waitLeft",event:"click",handler:o}],u=[{element:".video-next-button",event:"click",handler:s},{element:".video-retry-button",event:"click",handler:r}],f=0,h=!0;return{init:t}}),define("text!tpl/deps.html",[],function(){return'<ul>\n	{{#if selectable}}\n		{{#each itemList}}\n		<li>\n			<label class="label-radio item-content">\n				<input type="radio" name="deps" value="">\n				<div class="item-inner">\n					<div class="item-title">{{item}}</div>\n				</div>\n			</label>\n		</li>\n		{{/each}}\n	{{else}}\n		{{#each itemList}}\n		<li>\n			<a href="#" class="item-link item-content">\n				<div class="item-inner">\n					<div class="item-title">{{item}}</div>\n				</div>\n			</a>\n		</li>\n		{{/each}}\n	{{/if}}\n</ul>\n'}),define("views/provView",["utils","text!tpl/deps.html"],function(e,t){function n(n){var a=Template7.compile(t),i=a({itemList:n.model});$$("#provList").html(i),e.bindEvents(n.bindings)}return{render:n}}),define("models/depsModel",[],function(){function e(e){s.push(e)}function t(){var e=n();return e.length>0}function n(){return s}function a(){for(var e=[],t=s[0].provList,n=0;n<t.length;n++)e.push(t[n].prov);return r(e)}function i(e){for(var t,n=[],a=s[0].provList,i=0;i<a.length;i++)if(a[i].prov===e){t=a[i].cityList;break}for(var o=0;o<t.length;o++)n.push(t[o].city);return r(n)}function o(e){for(var t,n=[],a=s[0].provList,i=0;i<a.length;i++)for(var o=0,l=a[i].cityList.length;l>o;o++)a[i].cityList[o].city===e&&(t=a[i].cityList[o].depsList);for(var c=0;c<t.length;c++)n.push(t[c].deps);return r(n)}function r(e){if(e instanceof Array){for(var t=[],n=0,a=e.length;a>n;n++)t.push({item:e[n]});return t}return""}var s=[];return{save:e,saved:t,fetchProv:a,fetchCity:i,fetchDeps:o}}),define("controllers/provController",["views/provView","models/depsModel"],function(e,t){function n(){var n,a=t.saved();a?(khApp.alert(""),n=t.fetchProv(),e.render({model:n,bindings:i})):(khApp.showIndicator(),$$.ajax({url:"api/deps-alls.json",type:"GET",success:function(a){a=JSON.parse(a),0===a.errorNo&&(t.save(a.model),khApp.hideIndicator(),n=t.fetchProv(),e.render({model:n,bindings:i}))}}))}function a(){var e=$$(this).find(".item-title").html();mainView.loadPage("select/city.html?prov="+e)}var i=[{element:"#provList .item-link",event:"click",handler:a}];return{init:n}}),define("views/cityView",["utils","text!tpl/deps.html"],function(e,t){function n(n){var a=Template7.compile(t),i=a({itemList:n.model});$$("#cityList").html(i),e.bindEvents(n.bindings)}return{render:n}}),define("controllers/cityController",["views/cityView","models/depsModel"],function(e,t){function n(n){var a=t.fetchCity(n.prov);e.render({model:a,bindings:i})}function a(){var e=$$(this).find(".item-title").html();mainView.loadPage("select/deps.html?city="+e)}var i=[{element:"#cityList .item-link",event:"click",handler:a}];return{init:n}}),define("views/depsView",["utils","text!tpl/deps.html"],function(e,t){function n(n){var a=Template7.compile(t),i=a({itemList:n.model,selectable:!0});$$("#depsList").html(i),e.bindEvents(n.bindings)}return{render:n}}),define("controllers/depsController",["views/depsView","models/depsModel"],function(e,t){function n(n){var a=t.fetchDeps(n.city);e.render({model:a,bindings:o})}function a(){var e=$$(".deps-select-button"),t=e.hasClass("disabled");if(t){var n=$$(this).find("input")[0];setTimeout(function(){n.checked&&e.removeClass("disabled")
},200)}}function i(){var e=$$("#depsList").find("input:checked"),t=e.parent(),n=t.find(".item-title").html();mainView.reloadPage("department.html?depsname="+n)}var o=[{element:"#depsList .label-radio",event:"click",handler:a},{element:".deps-select-button",event:"click",handler:i}];return{init:n}});